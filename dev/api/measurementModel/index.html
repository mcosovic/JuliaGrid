<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Measurement Model · JuliaGrid</title><meta name="title" content="Measurement Model · JuliaGrid"/><meta property="og:title" content="Measurement Model · JuliaGrid"/><meta property="twitter:title" content="Measurement Model · JuliaGrid"/><meta name="description" content="Documentation for JuliaGrid."/><meta property="og:description" content="Documentation for JuliaGrid."/><meta property="twitter:description" content="Documentation for JuliaGrid."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../manual/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../manual/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../manual/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../manual/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../manual/dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../tutorials/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../tutorials/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../tutorials/dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../powerFlow/">Power Flow</a></li><li><a class="tocitem" href="../optimalPowerFlow/">Optimal Power Flow</a></li><li class="is-active"><a class="tocitem" href>Measurement Model</a><ul class="internal"><li><a class="tocitem" href="#Measurement-Data-2"><span>Measurement Data</span></a></li><li><a class="tocitem" href="#Voltmeter-2"><span>Voltmeter</span></a></li><li><a class="tocitem" href="#Ammeter-2"><span>Ammeter</span></a></li><li><a class="tocitem" href="#Wattmeter-2"><span>Wattmeter</span></a></li><li><a class="tocitem" href="#Varmeter-2"><span>Varmeter</span></a></li><li><a class="tocitem" href="#PMU-2"><span>PMU</span></a></li></ul></li><li><a class="tocitem" href="../stateEstimation/">State Estimation</a></li><li><a class="tocitem" href="../analysis/">Power and Current Analysis</a></li><li><a class="tocitem" href="../configuration/">Configuration Setup</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href>Measurement Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Measurement Model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/api/measurementModel.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="measurementModelAPI"><a class="docs-heading-anchor" href="#measurementModelAPI">Measurement Model</a><a id="measurementModelAPI-1"></a><a class="docs-heading-anchor-permalink" href="#measurementModelAPI" title="Permalink"></a></h1><p>For further information on this topic, please see the <a href="../../manual/measurementModel/#MeasurementModelManual">Measurement Model</a> section of the Manual. Below, we have provided a list of functions that can be used to create, save, and manipulate with measurement devices.</p><hr/><h6 id="Measurement-Data"><a class="docs-heading-anchor" href="#Measurement-Data">Measurement Data</a><a id="Measurement-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Measurement-Data" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.measurement"><code>measurement</code></a></li><li><a href="#JuliaGrid.saveMeasurement"><code>saveMeasurement</code></a></li><li><a href="#JuliaGrid.status!"><code>status!</code></a></li></ul><h6 id="Voltmeter"><a class="docs-heading-anchor" href="#Voltmeter">Voltmeter</a><a id="Voltmeter-1"></a><a class="docs-heading-anchor-permalink" href="#Voltmeter" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}"><code>addVoltmeter!</code></a></li><li><a href="#JuliaGrid.updateVoltmeter!"><code>updateVoltmeter!</code></a></li><li><a href="#JuliaGrid.statusVoltmeter!"><code>statusVoltmeter!</code></a></li><li><a href="#JuliaGrid.@voltmeter"><code>@voltmeter</code></a></li></ul><h6 id="Ammeter"><a class="docs-heading-anchor" href="#Ammeter">Ammeter</a><a id="Ammeter-1"></a><a class="docs-heading-anchor-permalink" href="#Ammeter" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>addAmmeter!</code></a></li><li><a href="#JuliaGrid.updateAmmeter!"><code>updateAmmeter!</code></a></li><li><a href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>statusAmmeter!</code></a></li><li><a href="#JuliaGrid.@ammeter"><code>@ammeter</code></a></li></ul><h6 id="Wattmeter"><a class="docs-heading-anchor" href="#Wattmeter">Wattmeter</a><a id="Wattmeter-1"></a><a class="docs-heading-anchor-permalink" href="#Wattmeter" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>addWattmeter!</code></a></li><li><a href="#JuliaGrid.updateWattmeter!"><code>updateWattmeter!</code></a></li><li><a href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>statusWattmeter!</code></a></li><li><a href="#JuliaGrid.@wattmeter"><code>@wattmeter</code></a></li></ul><h6 id="Varmeter"><a class="docs-heading-anchor" href="#Varmeter">Varmeter</a><a id="Varmeter-1"></a><a class="docs-heading-anchor-permalink" href="#Varmeter" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>addVarmeter!</code></a></li><li><a href="#JuliaGrid.updateVarmeter!"><code>updateVarmeter!</code></a></li><li><a href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>statusVarmeter!</code></a></li><li><a href="#JuliaGrid.@varmeter"><code>@varmeter</code></a></li></ul><h6 id="PMU"><a class="docs-heading-anchor" href="#PMU">PMU</a><a id="PMU-1"></a><a class="docs-heading-anchor-permalink" href="#PMU" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>addPmu!</code></a></li><li><a href="#JuliaGrid.updatePmu!"><code>updatePmu!</code></a></li><li><a href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>statusPmu!</code></a></li><li><a href="#JuliaGrid.@pmu"><code>@pmu</code></a></li></ul><hr/><h2 id="Measurement-Data-2"><a class="docs-heading-anchor" href="#Measurement-Data-2">Measurement Data</a><a class="docs-heading-anchor-permalink" href="#Measurement-Data-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.measurement" href="#JuliaGrid.measurement"><code>JuliaGrid.measurement</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">measurement(file::String)</code></pre><p>The function builds the composite type <code>Measurement</code> and populates <code>voltmeter</code>, <code>ammeter</code>,  <code>wattmeter</code>, <code>varmeter</code>, and <code>pmu</code> fields. In general, once the composite type <code>Measurement</code>  has been created, it is possible to add new measurement devices, or modify the parameters  of existing ones.</p><p><strong>Argument</strong></p><ul><li>passing the path to the HDF5 file with the <code>.h5</code> extension.</li></ul><p><strong>Returns</strong></p><p>The <code>Measurement</code> composite type with the following fields:</p><ul><li><code>voltmeter</code>: bus voltage magnitude measurements;</li><li><code>ammeter</code>: branch current magnitude measurements;</li><li><code>wattmeter</code>: active power injection and active power flow measurements;</li><li><code>varmeter</code>: reactive power injection and reactive power flow measurements;</li><li><code>pmu</code>: bus voltage and branch current phasors measurements.</li></ul><p><strong>Units</strong></p><p>JuliaGrid stores all data in per-units and radians format. </p><p><strong>Example</strong></p><pre><code class="language-julia hljs">device = measurement(&quot;measurement14.h5&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/load.jl#L1-L27">source</a></section><section><div><pre><code class="language-julia hljs">measurement()</code></pre><p>Alternatively, the <code>Measurement</code> composite type can be initialized by calling the function without any arguments. This allows the model to be built from scratch and modified as needed.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">device = measurement()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/load.jl#L50-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.saveMeasurement" href="#JuliaGrid.saveMeasurement"><code>JuliaGrid.saveMeasurement</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">saveMeasurement(device::Measurement; path::String, reference::String, note::String)</code></pre><p>The function saves the measurement&#39;s data in the HDF5 file using the fields <code>voltmeter</code>,  <code>ammeter</code>, <code>wattmeter</code>, <code>varmeter</code>, and <code>pmu</code> from the <code>Measurement</code> composite type.</p><p><strong>Keywords</strong></p><p>The location and file name of the HDF5 file is specified by the mandatory keyword <code>path</code> in the format of <code>&quot;path/name.h5&quot;</code>. Additional information can be provided by the optional keywords <code>reference</code> and <code>note</code>, which can be saved along with the power system data.</p><p><strong>View HDF5 File</strong></p><p>To view the saved HDF5 file, you can use the <a href="https://www.hdfgroup.org/downloads/hdfview/">HDFView</a> software.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.m&quot;)
acModel!(system)
analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)
power!(system, analysis)

device = measurement()
addVoltmeter!(system, device, analysis)
addWattmeter!(system, device, analysis)

saveMeasurement(device; path = &quot;D:/measurement14.h5&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/save.jl#L1-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.status!" href="#JuliaGrid.status!"><code>JuliaGrid.status!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">status!(system::PowerSystem, device::Measurement; inservice, outservice, redundancy)</code></pre><p>The function generates a set of measurements, assigning measurement devices randomly to  either in-service or out-of-service states based on specified keywords.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the measurement set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service devices;</li><li><code>outservice</code>: sets the number of out-of-service devices;</li><li><code>redundancy</code>: determines in-service devices based on redundancy.</li></ul><p>If a user employs multiple keywords for configuration, only the first keyword in the  hierarchical order will be considered, and the other keywords will be disregarded.</p><p><strong>Updates</strong></p><p>The function updates all the <code>status</code> fields within the <code>Measurement</code> composite type.</p><p><strong>Examples</strong></p><p>Creating a measurement set with a specific number of in-service devices:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

addVoltmeter!(system, device, analysis)
addWattmeter!(system, device, analysis)

status!(system, device; inservice = 30)</code></pre><p>Creating a measurement set using redundancy:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

addVoltmeter!(system, device, analysis)
addWattmeter!(system, device, analysis)
addVarmeter!(system, device, analysis)

status!(system, device; redundancy = 2.5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L1-L66">source</a></section></article><hr/><h2 id="Voltmeter-2"><a class="docs-heading-anchor" href="#Voltmeter-2">Voltmeter</a><a class="docs-heading-anchor-permalink" href="#Voltmeter-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}" href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}"><code>JuliaGrid.addVoltmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addVoltmeter!(system::PowerSystem, device::Measurement; label, bus, magnitude, variance,
    noise, status)</code></pre><p>The function adds a new voltmeter that measures bus voltage magnitude to the <code>Measurement</code>  composite type within a given <code>PowerSystem</code> type. The voltmeter can be added to an already  defined bus.</p><p><strong>Keywords</strong></p><p>The voltmeter is defined with the following keywords:</p><ul><li><code>label</code>: a unique label for the voltmeter;</li><li><code>bus</code>: the label of the bus to which the voltmeter is connected;</li><li><code>magnitude</code> (pu or V): the bus voltage magnitude value;</li><li><code>variance</code> (pu or V): the variance of the bus voltage magnitude measurement;</li><li><code>noise</code>: specifies how to generate the measurement mean:<ul><li><code>noise = true</code>: adds white Gaussian noise with the <code>variance</code> to the <code>magnitude</code>;</li><li><code>noise = false</code>: uses the <code>magnitude</code> value only.</li></ul></li><li><code>status</code>: the operating status of the voltmeter:<ul><li><code>status = 1</code>: in-service;</li><li><code>status = 0</code>: out-of-service;</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>voltmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for certain keywords are as follows: <code>variance = 1e-2</code>, <code>noise = true</code>,  <code>status = 1</code>, and users can modify these default settings using the <a href="#JuliaGrid.@voltmeter"><code>@voltmeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>magnitude</code> and <code>variance</code> keywords are per-units (pu). However, users can choose to use volts (V) as the units by applying the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding a voltmeter using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)

addVoltmeter!(system, device; label = &quot;Voltmeter 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 1.1)</code></pre><p>Adding a voltmeter using a custom unit system:</p><pre><code class="language-julia hljs">@voltage(kV, rad, kV)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132.0)

addVoltmeter!(system, device; label = &quot;Voltmeter 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 145.2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/voltmeter.jl#L1-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement, AC}" href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement, AC}"><code>JuliaGrid.addVoltmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addVoltmeter!(system::PowerSystem, device::Measurement, analysis::AC; variance, status)</code></pre><p>The function incorporates voltmeters into the <code>Measurement</code> composite type for every bus within the <code>PowerSystem</code> type. These measurements are derived from the exact bus voltage magnitudes defined in the <code>AC</code> abstract type. These exact values are perturbed by white  Gaussian noise with the specified <code>variance</code> to obtain measurement data.</p><p><strong>Keywords</strong></p><p>Users have the option to configure the following keywords:</p><ul><li><code>variance</code> (pu or V): the variance of bus voltage magnitude measurements;</li><li><code>status</code>: the operating status of the voltmeters:<ul><li><code>status = 1</code>: in-service;</li><li><code>status = 0</code>: out-of-service.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>voltmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for keywords are as follows: <code>variance = 1e-2</code>, <code>status = 1</code>, and users can modify these default settings using the <a href="#JuliaGrid.@voltmeter"><code>@voltmeter</code></a> macro.</p><p><strong>Units</strong></p><p>By default, the unit for <code>variance</code> is per-unit (pu). However, users can choose to use volts (V) as the units by applying the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro.</p><p><strong>Abstract type</strong></p><p>The abstract type <code>AC</code> can have the following subtypes:</p><ul><li><code>ACPowerFlow</code>: generates measurements uses AC power flow results;</li><li><code>ACOptimalPowerFlow</code>: generates measurements uses AC optimal power flow results.</li></ul><p><strong>Examples</strong></p><p>Adding voltmeters using exact values from the AC power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end

device = measurement()

@voltmeter(label = &quot;Voltmeter ?&quot;)
addVoltmeter!(system, device, analysis; variance = 1e-3)</code></pre><p>Adding voltmeters using exact values from the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)

device = measurement()

@voltmeter(label = &quot;Voltmeter ?&quot;)
addVoltmeter!(system, device, analysis; variance = 1e-3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/voltmeter.jl#L76-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.updateVoltmeter!" href="#JuliaGrid.updateVoltmeter!"><code>JuliaGrid.updateVoltmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">updateVoltmeter!(system::PowerSystem, device::Measurement, analysis::Analysis; kwargs...)</code></pre><p>The function allows for the alteration of parameters for a voltmeter.</p><p><strong>Arguments</strong></p><p>If the <code>Analysis</code> type is omitted, the function applies changes to the <code>Measurement</code> composite type only. However, when including the <code>Analysis</code> type, it updates both the <code>Measurement</code> and <code>Analysis</code> types. This streamlined process avoids the need to completely rebuild vectors and matrices when adjusting these parameters.</p><p><strong>Keywords</strong></p><p>To update a specific voltmeter, provide the necessary <code>kwargs</code> input arguments in accordance with the keywords specified in the <a href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}"><code>addVoltmeter!</code></a> function, along with their respective values. Ensure that the <code>label</code> keyword matches the <code>label</code> of the existing voltmeter you want to modify. If any keywords are omitted, their corresponding values will remain unchanged.</p><p><strong>Updates</strong></p><p>The function updates the <code>voltmeter</code> field within the <code>Measurement</code> composite type. Furthermore, it guarantees that any modifications to the parameters are transmitted to the <code>Analysis</code> type.</p><p><strong>Units</strong></p><p>Units for input parameters can be changed using the same method as described for the <a href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}"><code>addVoltmeter!</code></a> function.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)

addVoltmeter!(system, device; label = &quot;Voltmeter 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 1.1)
updateVoltmeter!(system, device; label = &quot;Voltmeter 1&quot;, magnitude = 0.9, noise = false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/voltmeter.jl#L172-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.statusVoltmeter!" href="#JuliaGrid.statusVoltmeter!"><code>JuliaGrid.statusVoltmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">statusVoltmeter!(system::PowerSystem, device::Measurement; inservice, outservice, 
    redundancy)</code></pre><p>The function generates a set of voltmeters, assigning voltmeters randomly to either  in-service or out-of-service states based on specified keywords.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the voltmeter set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service devices;</li><li><code>outservice</code>: sets the number of out-of-service devices;</li><li><code>redundancy</code>: determines in-service devices based on redundancy.</li></ul><p>If a user employs multiple keywords for configuration, only the first keyword in the  hierarchical order will be considered, and the other keywords will be disregarded.</p><p><strong>Updates</strong></p><p>The function updates the <code>status</code> field within the <code>Voltmeter</code> composite type.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end

device = measurement()

addVoltmeter!(system, device, analysis)
statusVoltmeter!(system, device; inservice = 10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L79-L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@voltmeter" href="#JuliaGrid.@voltmeter"><code>JuliaGrid.@voltmeter</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@voltmeter(label, variance, noise, status)</code></pre><p>The macro generates a template for a voltmeter, which can be utilized to define a voltmeter using the <a href="#JuliaGrid.addVoltmeter!-Tuple{PowerSystem, Measurement}"><code>addVoltmeter!</code></a> function.</p><p><strong>Keywords</strong></p><p>To establish the voltmeter template, users can specify default values for the <code>variance</code>, <code>noise</code>, and <code>status</code> keywords, along with pattern for labels using the <code>label</code> keyword.</p><p><strong>Units</strong></p><p>By default, the unit for <code>variance</code> is per-unit (pu). However, users can choose to use volts (V) as the units by applying the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding a voltmeter using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)

@voltmeter(label = &quot;Voltmeter ?&quot;, variance = 1e-5, noise = false)
addVoltmeter!(system, device; bus = &quot;Bus 1&quot;, magnitude = 1.1)</code></pre><p>Adding a voltmeter using a custom unit system:</p><pre><code class="language-julia hljs">@voltage(kV, rad, kV)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132.0)

@voltmeter(label = &quot;Voltmeter ?&quot;, variance = 0.00132, noise = false)
addVoltmeter!(system, device; bus = &quot;Bus 1&quot;, magnitude = 145.2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/voltmeter.jl#L225-L262">source</a></section></article><hr/><h2 id="Ammeter-2"><a class="docs-heading-anchor" href="#Ammeter-2">Ammeter</a><a class="docs-heading-anchor-permalink" href="#Ammeter-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}" href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>JuliaGrid.addAmmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addAmmeter!(system::PowerSystem, device::Measurement; label, from, to, magnitude,
    variance, noise, status)</code></pre><p>The function adds a new ammeter that measures branch current magnitude to the  <code>Measurement</code> composite type within a given <code>PowerSystem</code> type. The ammeter can be added  to an already defined branch.</p><p><strong>Keywords</strong></p><p>The ammeter is defined with the following keywords:</p><ul><li><code>label</code>: a unique label for the ammeter;</li><li><code>from</code>: the label of the branch if the ammeter is located at the &quot;from&quot; bus end;</li><li><code>to</code>: the label of the branch if the ammeter is located at the &quot;to&quot; bus end;</li><li><code>magnitude</code> (pu or A): the branch current magnitude value;</li><li><code>variance</code> (pu or A): the variance of the branch current magnitude measurement;</li><li><code>noise</code>: specifies how to generate the measurement mean:<ul><li><code>noise = true</code>: adds white Gaussian noise with the <code>variance</code> to the <code>magnitude</code>;</li><li><code>noise = false</code>: uses the <code>magnitude</code> value only.</li></ul></li><li><code>status</code>: the operating status of the ammeter:<ul><li><code>status = 1</code>: in-service;</li><li><code>status = 0</code>: out-of-service;</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>ammeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for certain keywords are as follows: <code>variance = 1e-2</code>, <code>noise = true</code>,  <code>status = 1</code>, which apply to ammeters located at both the &quot;from&quot; and &quot;to&quot; bus ends. Users can fine-tune these settings by explicitly specifying the variance and status for ammeters positioned on either the &quot;from&quot; or &quot;to&quot; bus ends of branches using the <a href="#JuliaGrid.@ammeter"><code>@ammeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>magnitude</code> and <code>variance</code> keywords are per-units (pu). However, users can choose to use amperes (A) as the units by applying the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding ammeters using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addAmmeter!(system, device; label = &quot;Ammeter 1&quot;, from = &quot;Branch 1&quot;, magnitude = 1.1)
addAmmeter!(system, device; label = &quot;Ammeter 2&quot;, to = &quot;Branch 1&quot;, magnitude = 1.0)</code></pre><p>Adding ammeters using a custom unit system:</p><pre><code class="language-julia hljs">@current(A, rad)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addAmmeter!(system, device; label = &quot;Ammeter 1&quot;, from = &quot;Branch 1&quot;, magnitude = 481.125)
addAmmeter!(system, device; label = &quot;Ammeter 2&quot;, to = &quot;Branch 1&quot;, magnitude = 437.386)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/ammeter.jl#L1-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement, AC}" href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement, AC}"><code>JuliaGrid.addAmmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addAmmeter!(system::PowerSystem, device::Measurement, analysis::AC; varianceFrom,
    statusFrom, varianceTo, statusTo)</code></pre><p>The function incorporates ammeters into the <code>Measurement</code> composite type for every branch within the <code>PowerSystem</code> type. These measurements are derived from the exact branch current magnitudes defined in the <code>AC</code> abstract type. These exact values are perturbed by white  Gaussian noise with the specified <code>variance</code> to obtain measurement data.</p><p><strong>Keywords</strong></p><p>Users have the option to configure the following keywords:</p><ul><li><code>varianceFrom</code> (pu or A): the measurement variance for ammeters at the &quot;from&quot; bus ends;</li><li><code>statusFrom</code>: the operating status of the ammeters at the &quot;from&quot; bus ends:<ul><li><code>statusFrom = 1</code>: in-service;</li><li><code>statusFrom = 0</code>: out-of-service;</li></ul></li><li><code>varianceTo</code> (pu or A): the measurement variance for ammeters at the &quot;to&quot; bus ends;</li><li><code>statusTo</code>: the operating status of the ammeters at the &quot;to&quot; bus ends:<ul><li><code>statusTo = 1</code>: in-service;</li><li><code>statusTo = 0</code>: out-of-service.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>ammeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for keywords are as follows: <code>varianceFrom = 1e-2</code>, <code>statusFrom = 1</code>, <code>varianceTo = 1e-2</code>, and <code>statusTo = 1</code>. Users can change these default settings using the <a href="#JuliaGrid.@ammeter"><code>@ammeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceFrom</code> and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to use amperes (A) as the units by applying the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Abstract type</strong></p><p>The abstract type <code>AC</code> can have the following subtypes:</p><ul><li><code>ACPowerFlow</code>: generates measurements uses AC power flow results;</li><li><code>ACOptimalPowerFlow</code>: generates measurements uses AC optimal power flow results.</li></ul><p><strong>Examples</strong></p><p>Adding ammeters using exact values from the AC power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
current!(system, analysis)

device = measurement()

@ammeter(label = &quot;Ammeter ?&quot;)
addAmmeter!(system, device, analysis; varianceFrom = 1e-3, statusTo = 0)</code></pre><p>Adding ammeters using exact values from the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)
current!(system, analysis)

device = measurement()

@ammeter(label = &quot;Ammeter ?&quot;)
addAmmeter!(system, device, analysis; varianceFrom = 1e-3, statusTo = 0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/ammeter.jl#L103-L177">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.updateAmmeter!" href="#JuliaGrid.updateAmmeter!"><code>JuliaGrid.updateAmmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">updateAmmeter!(system::PowerSystem, device::Measurement, analysis::Analysis; kwargs...)</code></pre><p>The function allows for the alteration of parameters for an ammeter.</p><p><strong>Arguments</strong></p><p>If the <code>Analysis</code> type is omitted, the function applies changes to the <code>Measurement</code> composite type only. However, when including the <code>Analysis</code> type, it updates both the <code>Measurement</code> and <code>Analysis</code> types. This streamlined process avoids the need to completely rebuild vectors and matrices when adjusting these parameters.</p><p><strong>Keywords</strong></p><p>To update a specific ammeter, provide the necessary <code>kwargs</code> input arguments in accordance with the keywords specified in the <a href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>addAmmeter!</code></a> function, along with their respective values. Ensure that the <code>label</code> keyword matches the <code>label</code> of the existing ammeter you want to modify. If any keywords are omitted, their corresponding values will remain unchanged.</p><p><strong>Updates</strong></p><p>The function updates the <code>ammeter</code> field within the <code>Measurement</code> composite type. Furthermore, it guarantees that any modifications to the parameters are transmitted to the <code>Analysis</code> type.</p><p><strong>Units</strong></p><p>Units for input parameters can be changed using the same method as described for the <a href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>addAmmeter!</code></a> function.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addAmmeter!(system, device; label = &quot;Ammeter 1&quot;, from = &quot;Branch 1&quot;, magnitude = 1.1)
updateAmmeter!(system, device; label = &quot;Ammeter 1&quot;, magnitude = 1.2, variance = 1e-4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/ammeter.jl#L239-L278">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.statusAmmeter!" href="#JuliaGrid.statusAmmeter!"><code>JuliaGrid.statusAmmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">statusAmmeter!(system::PowerSystem, ammeter::Ammeter; inservice, inserviceFrom, 
    inserviceTo, outservice, outserviceFrom, outserviceTo, redundancy, redundancyFrom, 
    redundancyTo)</code></pre><p>The function generates a set of ammeters, assigning ammeters randomly to either in-service  or out-of-service states based on specified keywords.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the ammeter set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service ammeters or allows fine-tuning:<ul><li><code>inserviceFrom</code>: sets only ammeters loacted at the &quot;from&quot; bus end;</li><li><code>inserviceTo</code>: sets only ammeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>outservice</code>: sets the number of out-of-service ammeters or allows fine-tuning:<ul><li><code>outserviceFrom</code>: sets only ammeters loacted at the &quot;from&quot; bus end;</li><li><code>outserviceTo</code>: sets only ammeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>redundancy</code>: determines in-service ammeters based on redundancy or allows fine-tuning:<ul><li><code>redundancyFrom</code>: determines only ammeters loacted at the &quot;from&quot; bus end;</li><li><code>redundancyTo</code>: determines only ammeters loacted at the &quot;to&quot; bus end.</li></ul></li></ul><p>In case a user employs multiple keywords from the set <code>inservice</code>, <code>outservice</code>, and  <code>redundancy</code>, only the first keyword in the hierarchical order will be taken into  consideration, and the remaining keywords will be ignored. Furthermore, in this scenario,  all fine-tuning keywords will not be considered.</p><p>If a user chooses fine-tuning without specifying any of the primary keywords, only one  keyword from each of the two sets will be executed, and the remaining keywords within each  set will be ignored. These sets are as follows:</p><ul><li><code>inserviceFrom</code>, <code>outserviceFrom</code>, <code>redundancyFrom</code>;</li><li><code>inserviceTo</code>, <code>outserviceTo</code>, <code>redundancyTo</code>.</li></ul><p><strong>Updates</strong></p><p>The function updates the <code>status</code> field within the <code>Ammeter</code> composite type.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
current!(system, analysis)

device = measurement()

addAmmeter!(system, device, analysis)
statusAmmeter!(system, device; inserviceFrom = 5, inserviceTo = 10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L131-L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@ammeter" href="#JuliaGrid.@ammeter"><code>JuliaGrid.@ammeter</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@ammeter(label, varianceFrom, statusFrom, varianceTo, statusTo, noise)</code></pre><p>The macro generates a template for an ammeter, which can be utilized to define an ammeter using the <a href="#JuliaGrid.addAmmeter!-Tuple{PowerSystem, Measurement}"><code>addAmmeter!</code></a> function.</p><p><strong>Keywords</strong></p><p>To establish the ammeter template, users can set default variance and status values for ammeters at both the &quot;from&quot; and &quot;to&quot; bus ends of branches using <code>varianceFrom</code> and <code>statusFrom</code> for the former and <code>varianceTo</code> and <code>statusTo</code> for the latter. Users can also configure label patterns with the <code>label</code> keyword, as well as specify the <code>noise</code> type.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceFrom</code> and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to use amperes (A) as the units by applying the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding an ammeter using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@ammeter(label = &quot;Ammeter ?&quot;, varianceTo = 1e-3, statusTo = 0, noise = false)
addAmmeter!(system, device; to = &quot;Branch 1&quot;, magnitude = 1.1)</code></pre><p>Adding an ammeter using a custom unit system:</p><pre><code class="language-julia hljs">@current(A, rad)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@ammeter(label = &quot;Ammeter ?&quot;, varianceTo = 0.004374, statusTo = 0, noise = false)
addAmmeter!(system, device; label = &quot;Ammeter 1&quot;, to = &quot;Branch 1&quot;, magnitude = 481.125)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/ammeter.jl#L300-L344">source</a></section></article><hr/><h2 id="Wattmeter-2"><a class="docs-heading-anchor" href="#Wattmeter-2">Wattmeter</a><a class="docs-heading-anchor-permalink" href="#Wattmeter-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}" href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>JuliaGrid.addWattmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addWattmeter!(system::PowerSystem, device::Measurement; label, bus, from, to, active,
    variance, noise, status)</code></pre><p>The function adds a new wattmeter that measures active power injection or active power flow to the <code>Measurement</code> composite type within a given <code>PowerSystem</code> type. The wattmeter can  be added to an already defined bus or branch.</p><p><strong>Keywords</strong></p><p>The wattmeter is defined with the following keywords:</p><ul><li><code>label</code>: a unique label for the wattmeter;</li><li><code>bus</code>: the label of the bus if the wattmeter is located at the bus;</li><li><code>from</code>: the label of the branch if the wattmeter is located at the &quot;from&quot; bus end;</li><li><code>to</code>: the label of the branch if the wattmeter is located at the &quot;to&quot; bus end;</li><li><code>active</code> (pu or W): the active power value;</li><li><code>variance</code> (pu or W): the variance of the active power measurement;</li><li><code>noise</code>: specifies how to generate the measurement mean:<ul><li><code>noise = true</code>: adds white Gaussian noise with the <code>variance</code> to the <code>active</code>;</li><li><code>noise = false</code>: uses the <code>active</code> value only.</li></ul></li><li><code>status</code>: the operating status of the wattmeter:<ul><li><code>status = 1</code>: in-service;</li><li><code>status = 0</code>: out-of-service;</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>wattmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for certain keywords are as follows: <code>variance = 1e-2</code>, <code>noise = true</code>,  and <code>status = 1</code>, which apply to wattmeters located at the bus, as well as at both the  &quot;from&quot; and &quot;to&quot; bus ends. Users can fine-tune these settings by explicitly specifying the  variance and status for wattmeters positioned at the buses, &quot;from&quot; bus ends, or &quot;to&quot; bus  ends of branches using the <a href="#JuliaGrid.@wattmeter"><code>@wattmeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>active</code> and <code>variance</code> keywords are per-units (pu). However, users can choose to use watts (W) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding wattmeters using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addWattmeter!(system, device; label = &quot;Wattmeter 1&quot;, bus = &quot;Bus 2&quot;, active = 0.4)
addWattmeter!(system, device; label = &quot;Wattmeter 2&quot;, from = &quot;Branch 1&quot;, active = 0.1)</code></pre><p>Adding wattmeters using a custom unit system:</p><pre><code class="language-julia hljs">@power(MW, pu, pu)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addWattmeter!(system, device; label = &quot;Wattmeter 1&quot;, bus = &quot;Bus 2&quot;, active = 40.0)
addWattmeter!(system, device; label = &quot;Wattmeter 2&quot;, from = &quot;Branch 1&quot;, active = 10.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L1-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement, AC}" href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement, AC}"><code>JuliaGrid.addWattmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addWattmeter!(system::PowerSystem, device::Measurement, analysis::AC;
    varianceBus, statusBus, varianceFrom, statusFrom, varianceTo, statusTo)</code></pre><p>The function incorporates wattmeters into the <code>Measurement</code> composite type for every bus and branch within the <code>PowerSystem</code> type. These measurements are derived from the exact active power injections at buses and active power flows in branches defined in the <code>AC</code> abstract type. These exact values are perturbed by white Gaussian noise with the specified  <code>variance</code> to obtain measurement data.</p><p><strong>Keywords</strong></p><p>Users have the option to configure the following keywords:</p><ul><li><code>varianceBus</code> (pu or W): the measurement variance for wattmeters at the buses;</li><li><code>statusBus</code>: the operating status of the wattmeters at the buses:<ul><li><code>statusBus = 1</code>: in-service;</li><li><code>statusBus = 0</code>: out-of-service;</li></ul></li><li><code>varianceFrom</code> (pu or W): the measurement variance for wattmeters at the &quot;from&quot; bus ends;</li><li><code>statusFrom</code>: the operating status of the wattmeters at the &quot;from&quot; bus ends:<ul><li><code>statusFrom = 1</code>: in-service;</li><li><code>statusFrom = 0</code>: out-of-service;</li></ul></li><li><code>varianceTo</code> (pu or W): the measurement variance for wattmeters at the &quot;to&quot; bus ends;</li><li><code>statusTo</code>: the operating status of the wattmeters at the &quot;to&quot; bus ends:<ul><li><code>statusTo = 1</code>: in-service;</li><li><code>statusTo = 0</code>: out-of-service.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>wattmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for keywords are as follows: <code>varianceBus = 1e-2</code>, <code>statusBus = 1</code>, <code>varianceFrom = 1e-2</code>, <code>statusFrom = 1</code>, <code>varianceTo = 1e-2</code>, and <code>statusTo = 1</code>. Users can change these default settings using the <a href="#JuliaGrid.@wattmeter"><code>@wattmeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceBus</code>, <code>varianceFrom</code>, and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to use watts (W) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Abstract type</strong></p><p>The abstract type <code>AC</code> can have the following subtypes:</p><ul><li><code>ACPowerFlow</code>: generates measurements uses AC power flow results;</li><li><code>ACOptimalPowerFlow</code>: generates measurements uses AC optimal power flow results.</li></ul><p><strong>Examples</strong></p><p>Adding wattmeters using exact values from the AC power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

@wattmeter(label = &quot;Wattmeter ?&quot;)
addWattmeter!(system, device, analysis; varianceBus = 1e-3, statusFrom = 0)</code></pre><p>Adding wattmeters using exact values from the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)
power!(system, analysis)

device = measurement()

@wattmeter(label = &quot;Wattmeter ?&quot;)
addWattmeter!(system, device, analysis; varianceBus = 1e-3, statusFrom = 0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L195-L274">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.updateWattmeter!" href="#JuliaGrid.updateWattmeter!"><code>JuliaGrid.updateWattmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">updateWattmeter!(system::PowerSystem, device::Measurement, analysis::Analysis; kwargs...)</code></pre><p>The function allows for the alteration of parameters for a wattmeter.</p><p><strong>Arguments</strong></p><p>If the <code>Analysis</code> type is omitted, the function applies changes to the <code>Measurement</code> composite type only. However, when including the <code>Analysis</code> type, it updates both the <code>Measurement</code> and <code>Analysis</code> types. This streamlined process avoids the need to completely rebuild vectors and matrices when adjusting these parameters.</p><p><strong>Keywords</strong></p><p>To update a specific wattmeter, provide the necessary <code>kwargs</code> input arguments in accordance with the keywords specified in the <a href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>addWattmeter!</code></a> function, along with their respective values. Ensure that the <code>label</code> keyword matches the <code>label</code> of the existing wattmeter you want to modify. If any keywords are omitted, their corresponding values will remain unchanged.</p><p><strong>Updates</strong></p><p>The function updates the <code>wattmeter</code> field within the <code>Measurement</code> composite type. Furthermore, it guarantees that any modifications to the parameters are transmitted to the <code>Analysis</code> type.</p><p><strong>Units</strong></p><p>Units for input parameters can be changed using the same method as described for the <a href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>addWattmeter!</code></a> function.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addWattmeter!(system, device; label = &quot;Wattmeter 1&quot;, from = &quot;Branch 1&quot;, active = 1.1)
updateWattmeter!(system, device; label = &quot;Wattmeter 1&quot;, active = 1.2, variance = 1e-4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L448-L487">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.statusWattmeter!" href="#JuliaGrid.statusWattmeter!"><code>JuliaGrid.statusWattmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">statusWattmeter!(system::PowerSystem, device::Measurement; inservice, inserviceBus, 
    inserviceFrom, inserviceTo, outservice, outserviceBus outserviceFrom, outserviceTo, 
    redundancy, redundancyBus, redundancyFrom, redundancyTo)</code></pre><p>The function generates a set of wattmeters, assigning wattmeters randomly to either  in-service or out-of-service states based on specified keywords.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the wattmeter set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service wattmeters or allows fine-tuning:<ul><li><code>inserviceBus</code>: sets only wattmeters loacted at the bus;</li><li><code>inserviceFrom</code>: sets only wattmeters loacted at the &quot;from&quot; bus end;</li><li><code>inserviceTo</code>: sets only wattmeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>outservice</code>: sets the number of out-of-service wattmeters or allows fine-tuning:<ul><li><code>outserviceBus</code>: sets only wattmeters loacted at the bus;</li><li><code>outserviceFrom</code>: sets only wattmeters loacted at the &quot;from&quot; bus end;</li><li><code>outserviceTo</code>: sets only wattmeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>redundancy</code>: determines in-service wattmeters based on redundancy or allows fine-tuning:<ul><li><code>redundancyBus</code>: determines only wattmeters loacted at the bus;</li><li><code>redundancyFrom</code>: determines only wattmeters loacted at the &quot;from&quot; bus end;</li><li><code>redundancyTo</code>: determines only wattmeters loacted at the &quot;to&quot; bus end.</li></ul></li></ul><p>In case a user employs multiple keywords from the set <code>inservice</code>, <code>outservice</code>, and  <code>redundancy</code>, only the first keyword in the hierarchical order will be taken into  consideration, and the remaining keywords will be ignored. Furthermore, in this scenario,  all fine-tuning keywords will not be considered.</p><p>If a user chooses fine-tuning without specifying any of the primary keywords, only one  keyword from each of the three sets will be executed, and the remaining keywords within  each set will be ignored. These sets are as follows:</p><ul><li><code>inserviceBus</code>, <code>outserviceBus</code>, <code>redundancyBus</code>;</li><li><code>inserviceFrom</code>, <code>outserviceFrom</code>, <code>redundancyFrom</code>;</li><li><code>inserviceTo</code>, <code>outserviceTo</code>, <code>redundancyTo</code>.</li></ul><p><strong>Updates</strong></p><p>The function updates the <code>status</code> field within the <code>Wattmeter</code> composite type.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

addWattmeter!(system, device, analysis)
statusWattmeter!(system, device; outserviceBus = 14, inserviceFrom = 10, outserviceTo = 2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L217-L275">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@wattmeter" href="#JuliaGrid.@wattmeter"><code>JuliaGrid.@wattmeter</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@wattmeter(label, varianceBus, statusBus, varianceFrom, statusFrom, varianceTo, statusTo,
    noise)</code></pre><p>The macro generates a template for a wattmeter, which can be utilized to define a wattmeter using the <a href="#JuliaGrid.addWattmeter!-Tuple{PowerSystem, Measurement}"><code>addWattmeter!</code></a> function.</p><p><strong>Keywords</strong></p><p>To establish the wattmeter template, users can set default variance and status values for wattmeters at buses using <code>varianceBus</code> and <code>statusBus</code>, and at both the &quot;from&quot; and &quot;to&quot; bus ends of branches using <code>varianceFrom</code> and <code>statusFrom</code> for the former and <code>varianceTo</code> and <code>statusTo</code> for the latter. Users can also configure label patterns with the <code>label</code> keyword, as well as specify the <code>noise</code> type.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceBus</code>, <code>varianceFrom</code>, and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to use watts (W) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding wattmeters using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@wattmeter(label = &quot;Wattmeter ?&quot;, varianceBus = 1e-3, varianceFrom = 1e-4, noise = false)
addWattmeter!(system, device; bus = &quot;Bus 2&quot;, active = 0.4)
addWattmeter!(system, device; from = &quot;Branch 1&quot;, active = 0.1)</code></pre><p>Adding wattmeters using a custom unit system:</p><pre><code class="language-julia hljs">@power(MW, pu, pu)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@wattmeter(label = &quot;Wattmeter ?&quot;, varianceBus = 1e-1, varianceFrom = 1e-2, noise = false)
addWattmeter!(system, device; bus = &quot;Bus 2&quot;, active = 40.0)
addWattmeter!(system, device; from = &quot;Branch 1&quot;, active = 10.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L669-L717">source</a></section></article><hr/><h2 id="Varmeter-2"><a class="docs-heading-anchor" href="#Varmeter-2">Varmeter</a><a class="docs-heading-anchor-permalink" href="#Varmeter-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}" href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>JuliaGrid.addVarmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addVarmeter!(system::PowerSystem, device::Measurement; label, bus, from, to, reactive,
    variance, noise, status)</code></pre><p>The function adds a new varmeter that measures reactivepower injection or reactive power  flow to the <code>Measurement</code> composite type within a given <code>PowerSystem</code> type. The varmeter  can be added to an already defined bus or branch.</p><p><strong>Keywords</strong></p><p>The varmeter is defined with the following keywords:</p><ul><li><code>label</code>: a unique label for the varmeter;</li><li><code>bus</code>: the label of the bus if the varmeter is located at the bus;</li><li><code>from</code>: the label of the branch if the varmeter is located at the &quot;from&quot; bus end;</li><li><code>to</code>: the label of the branch if the varmeter is located at the &quot;to&quot; bus end;</li><li><code>reactive</code> (pu or VAr): the reactive power value;</li><li><code>variance</code> (pu or VAr): the variance of the reactive power measurement;</li><li><code>noise</code>: specifies how to generate the measurement mean:<ul><li><code>noise = true</code>: adds white Gaussian noise with the <code>variance</code> to the <code>reactive</code>;</li><li><code>noise = false</code>: uses the <code>reactive</code> value only.</li></ul></li><li><code>status</code>: the operating status of the varmeter:<ul><li><code>status = 1</code>: in-service;</li><li><code>status = 0</code>: out-of-service;</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>varmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for certain keywords are as follows: <code>variance = 1e-2</code>, <code>noise = true</code>,  and <code>status = 1</code>, which apply to varmeters located at the bus, as well as at both the  &quot;from&quot; and &quot;to&quot; bus ends. Users can fine-tune these settings by explicitly specifying the  variance and status for varmeters positioned at the buses, &quot;from&quot; bus ends, or &quot;to&quot; bus  ends of branches using the <a href="#JuliaGrid.@varmeter"><code>@varmeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>reactive</code> and <code>variance</code> keywords are per-units (pu). However, users can choose to use volt-amperes reactive (VAr) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding varmeters using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addVarmeter!(system, device; label = &quot;Varmeter 1&quot;, bus = &quot;Bus 2&quot;, reactive = 0.4)
addVarmeter!(system, device; label = &quot;Varmeter 2&quot;, from = &quot;Branch 1&quot;, reactive = 0.1)</code></pre><p>Adding varmeters using a custom unit system:</p><pre><code class="language-julia hljs">@power(MW, pu, pu)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addVarmeter!(system, device; label = &quot;Varmeter 1&quot;, bus = &quot;Bus 2&quot;, reactive = 40.0)
addVarmeter!(system, device; label = &quot;Varmeter 2&quot;, from = &quot;Branch 1&quot;, reactive = 10.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L76-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement, AC}" href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement, AC}"><code>JuliaGrid.addVarmeter!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addVarmeter!(system::PowerSystem, device::Measurement, analysis::AC;
    varianceBus, statusBus, varianceFrom, statusFrom, varianceTo, statusTo)</code></pre><p>The function incorporates varmeters into the <code>Measurement</code> composite type for every bus and branch within the <code>PowerSystem</code> type. These measurements are derived from the exact reactive power injections at buses and reactive power flows in branches defined in the <code>AC</code> abstract type. These exact values are perturbed by white Gaussian noise with the specified  <code>variance</code> to obtain measurement data.</p><p><strong>Keywords</strong></p><ul><li><code>varianceBus</code> (pu or VAr): the measurement variance for varmeters at the buses;</li><li><code>statusBus</code>: the operating status of the varmeters at the buses:<ul><li><code>statusBus = 1</code>: in-service;</li><li><code>statusBus = 0</code>: out-of-service;</li></ul></li><li><code>varianceFrom</code> (pu or VAr): the measurement variance for varmeters at the &quot;from&quot; bus ends;</li><li><code>statusFrom</code>: the operating status of the varmeters at the &quot;from&quot; bus ends:<ul><li><code>statusFrom = 1</code>: in-service;</li><li><code>statusFrom = 0</code>: out-of-service;</li></ul></li><li><code>varianceTo</code> (pu or VAr): the measurement variance for varmeters at the &quot;to&quot; bus ends;</li><li><code>statusTo</code>: the operating status of the varmeters at the &quot;to&quot; bus ends:<ul><li><code>statusTo = 1</code>: in-service;</li><li><code>statusTo = 0</code>: out-of-service.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>varmeter</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for keywords are as follows: <code>varianceBus = 1e-2</code>, <code>statusBus = 1</code>, <code>varianceFrom = 1e-2</code>, <code>statusFrom = 1</code>, <code>varianceTo = 1e-2</code>, and <code>statusTo = 1</code>. Users can change these default settings using the <a href="#JuliaGrid.@varmeter"><code>@varmeter</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceBus</code>, <code>varianceFrom</code>, and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to use volt-amperes reactive (VAr) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Abstract type</strong></p><p>The abstract type <code>AC</code> can have the following subtypes:</p><ul><li><code>ACPowerFlow</code>: generates measurements uses AC power flow results;</li><li><code>ACOptimalPowerFlow</code>: generates measurements uses AC optimal power flow results.</li></ul><p><strong>Examples</strong></p><p>Adding varmeters using exact values from the AC power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

@varmeter(label = &quot;Varmeter ?&quot;)
addVarmeter!(system, device, analysis; varianceFrom = 1e-3, statusBus = 0)</code></pre><p>Adding varmeters using exact values from the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)
power!(system, analysis)

device = measurement()

@varmeter(label = &quot;Varmeter ?&quot;)
addVarmeter!(system, device, analysis; varianceFrom = 1e-3, statusBus = 0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L287-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.updateVarmeter!" href="#JuliaGrid.updateVarmeter!"><code>JuliaGrid.updateVarmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">updateVarmeter!(system::PowerSystem, device::Measurement, analysis::Analysis; kwargs...)</code></pre><p>The function allows for the alteration of parameters for a varmeter.</p><p><strong>Arguments</strong></p><p>If the <code>Analysis</code> type is omitted, the function applies changes to the <code>Measurement</code> composite type only. However, when including the <code>Analysis</code> type, it updates both the <code>Measurement</code> and <code>Analysis</code> types. This streamlined process avoids the need to completely rebuild vectors and matrices when adjusting these parameters.</p><p><strong>Keywords</strong></p><p>To update a specific varmeter, provide the necessary <code>kwargs</code> input arguments in accordance with the keywords specified in the <a href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>addVarmeter!</code></a> function, along with their respective values. Ensure that the <code>label</code> keyword matches the <code>label</code> of the existing varmeter you want to modify. If any keywords are omitted, their corresponding values will remain unchanged.</p><p><strong>Updates</strong></p><p>The function updates the <code>varmeter</code> field within the <code>Measurement</code> composite type. Furthermore, it guarantees that any modifications to the parameters are transmitted to the <code>Analysis</code> type.</p><p><strong>Units</strong></p><p>Units for input parameters can be changed using the same method as described for the <a href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>addVarmeter!</code></a> function.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addVarmeter!(system, device; label = &quot;Varmeter 1&quot;, from = &quot;Branch 1&quot;, reactive = 1.1)
updateVarmeter!(system, device; label = &quot;Varmeter 1&quot;, reactive = 1.2, variance = 1e-4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L616-L655">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.statusVarmeter!" href="#JuliaGrid.statusVarmeter!"><code>JuliaGrid.statusVarmeter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">statusVarmeter!(system::PowerSystem, device::Measurement; inservice, inserviceBus, 
    inserviceFrom, inserviceTo, outservice, outserviceBus outserviceFrom, outserviceTo, 
    redundancy, redundancyBus, redundancyFrom, redundancyTo)</code></pre><p>The function generates a set of varmeters, assigning varmeters randomly to either  in-service or out-of-service states based on specified keywords.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the varmeter set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service varmeters or allows fine-tuning:<ul><li><code>inserviceBus</code>: sets only varmeters loacted at the bus;</li><li><code>inserviceFrom</code>: sets only varmeters loacted at the &quot;from&quot; bus end;</li><li><code>inserviceTo</code>: sets only varmeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>outservice</code>: sets the number of out-of-service varmeters or allows fine-tuning:<ul><li><code>outserviceBus</code>: sets only varmeters loacted at the bus;</li><li><code>outserviceFrom</code>: sets only varmeters loacted at the &quot;from&quot; bus end;</li><li><code>outserviceTo</code>: sets only varmeters loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>redundancy</code>: determines in-service varmeters based on redundancy or allows fine-tuning:<ul><li><code>redundancyBus</code>: determines only varmeters loacted at the bus;</li><li><code>redundancyFrom</code>: determines only varmeters loacted at the &quot;from&quot; bus end;</li><li><code>redundancyTo</code>: determines only varmeters loacted at the &quot;to&quot; bus end.</li></ul></li></ul><p>In case a user employs multiple keywords from the set <code>inservice</code>, <code>outservice</code>, and  <code>redundancy</code>, only the first keyword in the hierarchical order will be taken into  consideration, and the remaining keywords will be ignored. Furthermore, in this scenario,  all fine-tuning keywords will not be considered.</p><p>If a user chooses fine-tuning without specifying any of the primary keywords, only one  keyword from each of the three sets will be executed, and the remaining keywords within  each set will be ignored. These sets are as follows:</p><ul><li><code>inserviceBus</code>, <code>outserviceBus</code>, <code>redundancyBus</code>;</li><li><code>inserviceFrom</code>, <code>outserviceFrom</code>, <code>redundancyFrom</code>;</li><li><code>inserviceTo</code>, <code>outserviceTo</code>, <code>redundancyTo</code>.</li></ul><p><strong>Updates</strong></p><p>The function updates the <code>status</code> field within the <code>Varmeter</code> composite type.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
power!(system, analysis)

device = measurement()

addVarmeter!(system, device, analysis)
statusVarmeter!(system, device; inserviceFrom = 20)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L315-L373">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@varmeter" href="#JuliaGrid.@varmeter"><code>JuliaGrid.@varmeter</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@varmeter(label, varinaceBus, varianceFrom, varianceTo, statusBus, statusFrom, statusTo,
    noise)</code></pre><p>The macro generates a template for a varmeter, which can be utilized to define a varmeter using the <a href="#JuliaGrid.addVarmeter!-Tuple{PowerSystem, Measurement}"><code>addVarmeter!</code></a> function.</p><p><strong>Keywords</strong></p><p>To establish the varmeter template, users can set default variance and status values for varmeters at buses using <code>varianceBus</code> and <code>statusBus</code>, and at both the &quot;from&quot; and &quot;to&quot; bus ends of branches using <code>varianceFrom</code> and <code>statusFrom</code> for the former and <code>varianceTo</code> and <code>statusTo</code> for the latter. Users can also configure label patterns with the <code>label</code> keyword, as well as specify the <code>noise</code> type.</p><p><strong>Units</strong></p><p>The default units for the <code>varianceBus</code>, <code>varianceFrom</code>, and <code>varianceTo</code> keywords are per-units (pu). However, users can choose to usevolt-amperes reactive (VAr) as the units by applying the <a href="../configuration/#JuliaGrid.@power"><code>@power</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding varmeters using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@varmeter(label = &quot;Varmeter ?&quot;, varianceBus = 1e-3, varianceFrom = 1e-4, noise = false)
addVarmeter!(system, device; bus = &quot;Bus 2&quot;, reactive = 0.4)
addVarmeter!(system, device; from = &quot;Branch 1&quot;, reactive = 0.1)</code></pre><p>Adding varmeters using a custom unit system:</p><pre><code class="language-julia hljs">@power(MW, pu, pu)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@varmeter(label = &quot;Varmeter ?&quot;, varianceBus = 1e-1, varianceFrom = 1e-2, noise = false)
addVarmeter!(system, device; bus = &quot;Bus 2&quot;, reactive = 40.0)
addVarmeter!(system, device; from = &quot;Branch 1&quot;, reactive = 10.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/powermeter.jl#L750-L798">source</a></section></article><hr/><h2 id="PMU-2"><a class="docs-heading-anchor" href="#PMU-2">PMU</a><a class="docs-heading-anchor-permalink" href="#PMU-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}" href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>JuliaGrid.addPmu!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addPmu!(system::PowerSystem, device::Measurement; label, bus, from, to, magnitude,
    varianceMagnitude, statusMagnitude, angle, varianceAngle, statusAngle, noise)</code></pre><p>The function adds a new PMU to the <code>Measurement</code> composite type within a given <code>PowerSystem</code> type. The PMU can be added to an already defined bus or branch. When defining the PMU, it is essential to provide the bus voltage magnitude and angle if the PMU is located at a bus  or the branch current magnitude and angle if the PMU is located at a branch.</p><p><strong>Keywords</strong></p><p>The PMU is defined with the following keywords:</p><ul><li><code>label</code>: a unique label for the PMU;</li><li><code>bus</code>: the label of the bus if the PMU is located at the bus;</li><li><code>from</code>: the label of the branch if the PMU is located at the &quot;from&quot; bus end;</li><li><code>to</code>: the label of the branch if the PMU is located at the &quot;to&quot; bus end;</li><li><code>magnitude</code> (pu or V, A): the bus voltage or branch current magnitude value;</li><li><code>varianceMagnitude</code> (pu or V, A): the magnitude measurement variance;</li><li><code>statusMagnitude</code>: the operating status of PMU magnitude measurement:<ul><li><code>statusMagnitude = 1</code>: in-service;</li><li><code>statusMagnitude = 0</code>: out-of-service;</li></ul></li><li><code>angle</code> (rad or deg): the bus voltage or branch current angle value;</li><li><code>varianceAngle</code> (rad or deg): the angle measurement variance;</li><li><code>statusAngle</code>: the operating status of PMU angle measurement:<ul><li><code>statusAngle = 1</code>: in-service;</li><li><code>statusAngle = 0</code>: out-of-service;</li></ul></li><li><code>noise</code>: specifies how to generate the measurement means:<ul><li><code>noise = true</code>: adds white Gaussian noises with variances to the <code>magnitude</code> and <code>angle</code>;</li><li><code>noise = false</code>: uses the <code>magnitude</code> and <code>angle</code> values only.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>pmu</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for certain keywords are as follows: <code>varianceMagnitude = 1e-5</code>, <code>statusMagnitude = 1</code>, <code>varianceAngle = 1e-5</code>, <code>statusAngle = 1</code>, and <code>noise = true</code>, which apply to PMUs located at the bus, as well as at both the &quot;from&quot; and &quot;to&quot; bus ends. Users can fine-tune these settings by explicitly specifying the variance and status for PMUs positioned at the buses, &quot;from&quot; bus ends, or &quot;to&quot; bus ends of branches using the <a href="#JuliaGrid.@pmu"><code>@pmu</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the <code>magnitude</code>, <code>varianceMagnitude</code>, and <code>angle</code>, <code>varianceAngle</code> keywords are per-units (pu) and radians (rad). However, users have the option to switch to volts (V) and degrees (deg) when the PMU is located at a bus using the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro, or amperes (A) and degrees (deg) when the PMU is located at a branch through the use of the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding PMUs using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addPmu!(system, device; label = &quot;PMU 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 1.1, angle = -0.1)
addPmu!(system, device; label = &quot;PMU 2&quot;, from = &quot;Branch 1&quot;, magnitude = 1.1, angle = 0.1)</code></pre><p>Adding PMUs using a custom unit system:</p><pre><code class="language-julia hljs">@voltage(kV, deg, kV)
@current(A, deg)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132.0)
addBus!(system; label = &quot;Bus 2&quot;, base = 132.0)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

addPmu!(system, device; label = &quot;PMU 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 145.2, angle = -5.7)
addPmu!(system, device; label = &quot;PMU 2&quot;, from = &quot;Branch 1&quot;, magnitude = 481.1, angle = 5.7)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/pmu.jl#L1-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement, AC}" href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement, AC}"><code>JuliaGrid.addPmu!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">addPmu!(system::PowerSystem, device::Measurement, analysis::AC;
    varianceMagnitudeBus, statusMagnitudeBus, varianceAngleBus, statusAngleBus,
    varianceMagnitudeFrom, statusMagnitudeFrom, varianceAngleFrom, statusAngleFrom,
    varianceMagnitudeTo, statusMagnitudeTo, varianceAngleTo, statusAngleTo)</code></pre><p>The function incorporates PMUs into the <code>Measurement</code> composite type for every bus and branch within the <code>PowerSystem</code> type. These measurements are derived from the exact bus voltage magnitudes and angles, as well as branch current magnitudes and angles defined in the <code>AC</code> abstract type. These exact values are then perturbed by white Gaussian noise with  the specified <code>varianceMagnitude</code> and <code>varianceAngle</code> to obtain measurement data.</p><p><strong>Keywords</strong></p><p>Users have the option to configure the following keywords:</p><ul><li><code>varianceMagnitudeBus</code> (pu or V): variance of PMU magnitude measurements at buses;</li><li><code>statusMagnitudeBus</code>: the operating status of PMU magnitude measurements at buses:<ul><li><code>statusMagnitudeBus = 1</code>: in-service;</li><li><code>statusMagnitudeBus = 0</code>: out-of-service;</li></ul></li><li><code>varianceAngleBus</code> (rad or deg): variance of PMU angle measurements at buses;</li><li><code>statusAngleBus</code>: the operating status of PMU agle measurements at buses:<ul><li><code>statusAngleBus = 1</code>: in-service;</li><li><code>statusAngleBus = 0</code>: out-of-service;</li></ul></li><li><code>varianceMagnitudeFrom</code> (pu or A): variance of PMU magnitude measurements at the &quot;from&quot; bus ends;      </li><li><code>statusMagnitudeFrom</code>: the operating status of PMU magnitude measurements at the &quot;from&quot; bus ends:<ul><li><code>statusMagnitudeFrom = 1</code>: in-service;</li><li><code>statusMagnitudeFrom = 0</code>: out-of-service;</li></ul></li><li><code>varianceAngleFrom</code> (rad or deg): variance of PMU angle measurements at the &quot;from&quot; bus ends;</li><li><code>statusAngleFrom</code>: the operating status of PMU angle measurements at the &quot;from&quot; bus ends:<ul><li><code>statusAngleFrom = 1</code>: in-service;</li><li><code>statusAngleFrom = 0</code>: out-of-service;</li></ul></li><li><code>varianceMagnitudeTo</code> (pu or A): variance of PMU magnitude measurements at the &quot;to&quot; bus ends; </li><li><code>statusMagnitudeTo</code>: the operating status of PMU magnitude measurements at the &quot;to&quot; bus ends:<ul><li><code>statusMagnitudeTo = 1</code>: in-service;</li><li><code>statusMagnitudeTo = 0</code>: out-of-service;</li></ul></li><li><code>varianceAngleTo</code> (rad or deg): variance of PMU angle measurements at the &quot;to&quot; bus ends;</li><li><code>statusAngleTo</code>: the operating status of PMU angle measurements at the &quot;to&quot; bus ends:<ul><li><code>statusAngleTo = 1</code>: in-service;</li><li><code>statusAngleTo = 0</code>: out-of-service.</li></ul></li></ul><p><strong>Updates</strong></p><p>The function updates the <code>pmu</code> field of the <code>Measurement</code> composite type.</p><p><strong>Default Settings</strong></p><p>Default settings for variance keywords are established at <code>1e-5</code>, with all statuses set to <code>1</code>. Users can change these default settings using the <a href="#JuliaGrid.@pmu"><code>@pmu</code></a> macro.</p><p><strong>Units</strong></p><p>The default units for the variance keywords are in per-units (pu) and radians (rad). However, users have the option to switch to volts (V) and degrees (deg) when the PMU is located at a bus using the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro, or amperes (A) and degrees (deg) when the PMU is located at a branch through the use of the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Abstract type</strong></p><p>The abstract type <code>AC</code> can have the following subtypes:</p><ul><li><code>ACPowerFlow</code>: generates measurements uses AC power flow results;</li><li><code>ACOptimalPowerFlow</code>: generates measurements uses AC optimal power flow results.</li></ul><p><strong>Examples</strong></p><p>Adding PMUs using exact values from the AC power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
current!(system, analysis)

device = measurement()

@pmu(label = &quot;PMU ?&quot;)
addPmu!(system, device, analysis; varianceMagnitudeBus = 1e-3)</code></pre><p>Adding PMUs using exact values from the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(system, analysis)
current!(system, analysis)

device = measurement()

@pmu(label = &quot;PMU ?&quot;)
addPmu!(system, device, analysis; varianceMagnitudeBus = 1e-3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/pmu.jl#L148-L241">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.updatePmu!" href="#JuliaGrid.updatePmu!"><code>JuliaGrid.updatePmu!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">updatePmu!(system::PowerSystem, device::Measurement, analysis::Analysis; kwargs...)</code></pre><p>The function allows for the alteration of parameters for a PMU.</p><p><strong>Arguments</strong></p><p>If the <code>Analysis</code> type is omitted, the function applies changes to the <code>Measurement</code> composite type only. However, when including the <code>Analysis</code> type, it updates both the <code>Measurement</code> and <code>Analysis</code> types. This streamlined process avoids the need to completely rebuild vectors and matrices when adjusting these parameters.</p><p><strong>Keywords</strong></p><p>To update a specific PMU, provide the necessary <code>kwargs</code> input arguments in accordance with the keywords specified in the <a href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>addPmu!</code></a> function, along with their respective values. Ensure that the <code>label</code> keyword matches the <code>label</code> of the existing PMU you want to modify. If any keywords are omitted, their corresponding values will remain unchanged.</p><p><strong>Updates</strong></p><p>The function updates the <code>pmu</code> field within the <code>Measurement</code> composite type. Furthermore, it guarantees that any modifications to the parameters are transmitted to the <code>Analysis</code> type.</p><p><strong>Units</strong></p><p>Units for input parameters can be changed using the same method as described for the <a href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>addPmu!</code></a> function.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)

addPmu!(system, device; label = &quot;PMU 1&quot;, bus = &quot;Bus 1&quot;, magnitude = 1.1, angle = -0.1)
updatePmu!(system, device; label = &quot;PMU 1&quot;, magnitude = 1.05, noise = false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/pmu.jl#L350-L387">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.statusPmu!" href="#JuliaGrid.statusPmu!"><code>JuliaGrid.statusPmu!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">statusPmu!(system::PowerSystem, device::Measurement; inservice, inserviceBus, 
    inserviceFrom, inserviceTo, outservice, outserviceBus outserviceFrom, outserviceTo, 
    redundancy, redundancyBus, redundancyFrom, redundancyTo)</code></pre><p>The function generates a set of PMUs, assigning PMUs randomly to either in-service or  out-of-service states based on specified keywords. It is important to note that when we  refer to PMU, we encompass both magnitude and angle measurements.</p><p><strong>Keywords</strong></p><p>These keywords allow the user to configure the PMU set as follows:</p><ul><li><code>inservice</code>: sets the number of in-service PMUs or allows fine-tuning:<ul><li><code>inserviceBus</code>: sets only PMUs loacted at the bus;</li><li><code>inserviceFrom</code>: sets only PMUs loacted at the &quot;from&quot; bus end;</li><li><code>inserviceTo</code>: sets only PMUs loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>outservice</code>: sets the number of out-of-service PMUs or allows fine-tuning:<ul><li><code>outserviceBus</code>: sets only PMUs loacted at the bus;</li><li><code>outserviceFrom</code>: sets only PMUs loacted at the &quot;from&quot; bus end;</li><li><code>outserviceTo</code>: sets only PMUs loacted at the &quot;to&quot; bus end;</li></ul></li><li><code>redundancy</code>: determines in-service PMUs based on redundancy or allows fine-tuning:<ul><li><code>redundancyBus</code>: determines only PMUs loacted at the bus;</li><li><code>redundancyFrom</code>: determines only PMUs loacted at the &quot;from&quot; bus end;</li><li><code>redundancyTo</code>: determines only PMUs loacted at the &quot;to&quot; bus end.</li></ul></li></ul><p>In case a user employs multiple keywords from the set <code>inservice</code>, <code>outservice</code>, and  <code>redundancy</code>, only the first keyword in the hierarchical order will be taken into  consideration, and the remaining keywords will be ignored. Furthermore, in this scenario,  all fine-tuning keywords will not be considered.</p><p>If a user chooses fine-tuning without specifying any of the primary keywords, only one  keyword from each of the three sets will be executed, and the remaining keywords within  each set will be ignored. These sets are as follows:</p><ul><li><code>inserviceBus</code>, <code>outserviceBus</code>, <code>redundancyBus</code>;</li><li><code>inserviceFrom</code>, <code>outserviceFrom</code>, <code>redundancyFrom</code>;</li><li><code>inserviceTo</code>, <code>outserviceTo</code>, <code>redundancyTo</code>.</li></ul><p><strong>Updates</strong></p><p>The function updates the <code>status</code> fields within the <code>PMU</code> composite type.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = newtonRaphson(system)
for i = 1:10
    stopping = mismatch!(system, analysis)
    if all(stopping .&lt; 1e-8)
        break
    end
    solve!(system, analysis)
end
current!(system, analysis)

device = measurement()

addPmu!(system, device, analysis)
statusPmu!(system, device; inserviceBus = 14)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/configuration.jl#L413-L472">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@pmu" href="#JuliaGrid.@pmu"><code>JuliaGrid.@pmu</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@pmu(label, varianceMagnitudeBus, statusMagnitudeBus, varianceAngleBus, statusAngleBus,
    varianceMagnitudeFrom, statusMagnitudeFrom, varianceAngleFrom, statusAngleFrom,
    varianceMagnitudeTo, statusMagnitudeTo, varianceAngleTo, statusAngleTo, noise)</code></pre><p>The macro generates a template for a PMU, which can be utilized to define a PMU using the <a href="#JuliaGrid.addPmu!-Tuple{PowerSystem, Measurement}"><code>addPmu!</code></a> function.</p><p><strong>Keywords</strong></p><p>To establish the PMU template, users have the option to set default values for magnitude and angle variances, as well as statuses for each component of the phasor. This can be done for PMUs located at the buses using the <code>varianceMagnitudeBus</code>, <code>varianceAngleBus</code>, <code>statusMagnitudeBus</code>, and <code>statusAngleBus</code> keywords. The same configuration can be applied at both the &quot;from&quot; bus ends of the branches using the <code>varianceMagnitudeFrom</code>, <code>varianceAngleFrom</code>, <code>statusMagnitudeFrom</code>, and <code>statusAngleFrom</code> keywords. For PMUs located at the &quot;to&quot; bus ends of the branches, users can use the <code>varianceMagnitudeTo</code>, <code>varianceAngleTo</code>, <code>statusMagnitudeTo</code>, and <code>statusAngleTo</code> keywords. Additionally, users can configure the pattern for labels using the <code>label</code> keyword and specify the type of <code>noise</code>.</p><p><strong>Units</strong></p><p>By default, the units for variances are per-units (pu) and radians (rad). However, users have the option to switch to volts (V) and degrees (deg) as the units for PMUs located at the buses by using the <a href="../configuration/#JuliaGrid.@voltage"><code>@voltage</code></a> macro, or they can switch to amperes (A) and degrees (deg) as the units for PMUs located at the branches by using the <a href="../configuration/#JuliaGrid.@current"><code>@current</code></a> macro.</p><p><strong>Examples</strong></p><p>Adding PMUs using the default unit system:</p><pre><code class="language-julia hljs">system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132e3)
addBus!(system; label = &quot;Bus 2&quot;, base = 132e3)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@pmu(label = &quot;PMU ?&quot;, varianceAngleBus = 1e-6, varianceMagnitudeFrom = 1e-4)
addPmu!(system, device; bus = &quot;Bus 1&quot;, magnitude = 1.1, angle = -0.1, noise = false)
addPmu!(system, device; from = &quot;Branch 1&quot;, magnitude = 1.1, angle = -0.2)</code></pre><p>Adding PMUs using a custom unit system:</p><pre><code class="language-julia hljs">@voltage(kV, deg, kV)
@current(A, deg)
system = powerSystem()
device = measurement()

addBus!(system; label = &quot;Bus 1&quot;, base = 132.0)
addBus!(system; label = &quot;Bus 2&quot;, base = 132.0)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.2)

@pmu(label = &quot;PMU ?&quot;, varianceAngleBus = 5.73e-5, varianceMagnitudeFrom = 0.0481)
addPmu!(system, device; bus = &quot;Bus 1&quot;, magnitude = 145.2, angle = -5.73, noise = false)
addPmu!(system, device; from = &quot;Branch 1&quot;, magnitude = 481.125, angle = -11.46)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/bc4bea3c0fe268e8e106688782976a0e3b67f82f/src/measurement/pmu.jl#L677-L734">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../optimalPowerFlow/">« Optimal Power Flow</a><a class="docs-footer-nextpage" href="../stateEstimation/">State Estimation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 7 March 2024 13:35">Thursday 7 March 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
