<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>AC Power Flow Analysis · JuliaGrid</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit">JuliaGrid</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Power System</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../powerSystem/model/">Power System Model</a></li><li><a class="tocitem" href="../../powerSystem/buildModel/">Build Power System Model</a></li><li><a class="tocitem" href="../../powerSystem/inDepthACModel/">In-depth AC Model</a></li><li><a class="tocitem" href="../../powerSystem/inDepthDCModel/">In-depth DC Model</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>AC Power Flow Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>AC Power Flow Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/powerFlow/ac.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="acPowerFlowAnalysis"><a class="docs-heading-anchor" href="#acPowerFlowAnalysis">AC Power Flow Analysis</a><a id="acPowerFlowAnalysis-1"></a><a class="docs-heading-anchor-permalink" href="#acPowerFlowAnalysis" title="Permalink"></a></h1><p>The AC power flow analysis requires the main composite type <code>PowerSystem</code> with fields <code>bus</code>, <code>branch</code>, <code>generator</code>, and <code>acModel</code>. Further, JuliaGrid stores results of the AC power flow analysis in the composite type <code>ACResult</code> with subtypes:</p><ul><li><code>bus</code></li><li><code>branch</code></li><li><code>generator</code></li><li><code>algorithm</code></li><li><code>mismatch</code></li><li><code>iteration</code>.</li></ul><p>Once the main composite type <code>PowerSystem</code> is created, it is possible to create composite type <code>ACResult</code> and initialize one of the algorithms for solving the AC power flow problem:</p><ul><li><code>newtonRaphson()</code></li><li><code>fastNewtonRaphsonBX()</code></li><li><code>fastNewtonRaphsonXB()</code></li><li><code>gaussSeidel()</code>.</li></ul><p>Solving the AC power flows implies determining the voltage magnitudes and angles on all buses, and this can be done by using one of the functions below, the function should be inside a loop, which simulates the iterative process:</p><ul><li><code>newtonRaphson!()</code></li><li><code>fastNewtonRaphson!()</code></li><li><code>gaussSeidel!()</code>.</li></ul><p>Then, it is possible to calculate other quantities of interest using functions:</p><ul><li><code>bus!()</code></li><li><code>branch!()</code></li><li><code>generator!()</code></li></ul><hr/><h2 id="Initialize-Algorithm"><a class="docs-heading-anchor" href="#Initialize-Algorithm">Initialize Algorithm</a><a id="Initialize-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#Initialize-Algorithm" title="Permalink"></a></h2><p>At the beginning, it is necessary to initialize the algorithm and create the composite type <code>ACResult</code>. Depending on which iterative algorithm will be chosen for solving AC power flow problem, the initialization can be done by one of the functions:</p><pre><code class="language-julia-repl">result = newtonRaphson(system)
result = fastNewtonRaphsonBX(system)
result = fastNewtonRaphsonXB(system)
result = gaussSeidel(system)</code></pre><p>The function affects field <code>result.algorithm</code>, but also field <code>result.bus.voltage</code>, setting the voltage angles and magnitudes to the initial values.</p><h2 id="Solution"><a class="docs-heading-anchor" href="#Solution">Solution</a><a id="Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Solution" title="Permalink"></a></h2><p>Functions <code>newtonRaphson!()</code>, <code>fastNewtonRaphson!()</code>, or <code>gaussSeidel!()</code> solves the AC power flow problem by determining the bus voltage magnitudes and angles.</p><pre><code class="language-julia-repl">newtonRaphson!(system, result)
fastNewtonRaphson!(system, result)
gaussSeidel!(system, result)</code></pre><p>The execution of these functions should be inside a loop to create a iterative process. The function affects fields <code>result.algorithm</code>, <code>result.mismatch</code>, <code>result.iteration</code> and <code>result.bus.voltage</code>. The field <code>result.mismatch</code> contains absolute values of active and reactive mismatches, which are used to terminate the iterative process.</p><hr/><h2 id="acpowerflow"><a class="docs-heading-anchor" href="#acpowerflow">In-depth Analysis</a><a id="acpowerflow-1"></a><a class="docs-heading-anchor-permalink" href="#acpowerflow" title="Permalink"></a></h2><p>The AC power flow analysis requested <code>acModel</code>, we advise the reader to read the section <a href="../../powerSystem/inDepthACModel/#inDepthACModel">in-depth AC Model</a> which describes the model in details.</p><hr/><h4 id="gaussseidel"><a class="docs-heading-anchor" href="#gaussseidel">Gauss-Seidel Method</a><a id="gaussseidel-1"></a><a class="docs-heading-anchor-permalink" href="#gaussseidel" title="Permalink"></a></h4><p>Defining the injected current into the bus <span>$i \in \mathcal{N}$</span> as:</p><p class="math-container">\[	\bar{I}_{i} = \frac{{P}_{i} - j{Q}_{i}}{\bar{V}_{i}^*},\]</p><p>the power flow problem which is described by the system of non-linear equations:</p><p class="math-container">\[    \mathbf {\bar {I}} = \mathbf{Y} \mathbf {\bar {V}},\]</p><p>can be written in the expanded form:</p><p class="math-container">\[  \begin{aligned}
    Y_{11} &amp; \bar{V}_{1}  + \cdots+ Y_{1n}\bar{V}_{n} = \frac{{P}_{1} - j{Q}_{1}}{\bar{V}_{1}^*} \\
    \; \vdots &amp; \\
    Y_{n1} &amp; \bar{V}_{1} + \cdots+ Y_{nn}\bar{V}_{n} = \frac{{P}_{n} - j{Q}_{n}}{\bar{V}_{n}^*}.
	\end{aligned}\]</p><p>The Gauss-Seidel method directly solves the above system of equations, albeit with very slow convergence, almost linearly with the size of the system. Consequently, this method needs many iterations to achieve the desired solution <a href="powerFlow/@ref refs">[3]</a>. In general, the Gauss-Seidel method is based on the above system of equations, where the set of non-linear equations has <span>$n$</span> complex equations, and one of these equations describes the slack bus. Consequently, one of these equations can be removed resulting in the power flow problem with <span>$n-1$</span> equations.</p><p>In the following, we observe a power system with sets <span>$\mathcal{PV}$</span> and <span>$\mathcal{PQ}$</span> that contain PV and PQ buses, respectively, and exactly one slack bus <span>$\{V \theta\}$</span>:</p><p class="math-container">\[  \mathcal{H} = \mathcal{PV} \cup \mathcal{PQ} \cup \{V \theta\}.\]</p><p>The method starts with initial complex bus voltages <span>$\bar{V}_i^{(0)}, i \in \mathcal{H}$</span>. The iteration scheme first computes complex bus voltages for PQ buses:</p><p class="math-container">\[    \bar{V}_{i}^{(\nu + 1)} =
    \cfrac{1}{{Y}_{ii}} \Bigg(\cfrac{{P}_{i} - j{Q}_{i}}{\bar{V}_{i}^{*(\nu)}} -
    \sum\limits_{\substack{j = 1}}^{i - 1} {Y}_{ij}\bar{V}_{j}^{(\nu + 1)} -
    \sum\limits_{\substack{j = i + 1}}^{n} {Y}_{ij}\bar{V}_{j}^{(\nu)}\Bigg),
    \;\;\; i \in \mathcal{PQ},\]</p><p>where <span>$\nu = \{0,1,\dots,\nu_{\max}\}$</span> is the iteration index and <span>$\nu_{\max}$</span> is the number of iterations. Then, the solution for PV buses are obtained in two steps: we first determine the reactive power injection, then the complex bus voltage is updated:</p><p class="math-container">\[  \begin{aligned}
    Q_i^{(\nu+1)} &amp;=
    -\Im \left\{ \bar{V}_{i}^{*(\nu + 1)} \sum\limits_{j=1}^n {Y}_{ij}\bar{V}_{j}^{(\nu+1)}\right\}, \;\;\; i \in \mathcal{PV} \\
    \bar{V}_{i}^{(\nu + 1)} &amp;:=
    \cfrac{1}{{Y}_{ii}} \Bigg(\cfrac{{P}_{i} - j{Q}_{i}^{(\nu + 1)}}{\bar{V}_{i}^{*(\nu + 1)}}-
    \sum\limits_{\substack{j = 1,\;j \neq i}}^{n} {Y}_{ij}\bar{V}_{j}^{(\nu + 1)} \Bigg), \;\;\; i \in \mathcal{PV}.
  \end{aligned}\]</p><p>Obtained voltage magnitude is not equal to the magnitude specified for the PV bus. Thus, it is necessary to perform the voltage correction:</p><p class="math-container">\[      \bar{V}_{i}^{(\nu+1)} := {V}_{i}^{(0)} \cfrac{\bar{V}_{i}^{(\nu+1)}}{{V}_{i}^{(\nu+1)}}, \;\;\; i \in \mathcal{PV}.\]</p><p>The iteration loop is repeated until the stopping criteria is met. Namely, after one iteration loop is done, we compute active power injection mismatch for PQ and PV buses:</p><p class="math-container">\[    \Delta P_i^{(\nu + 1)} = \Re\{\bar{V}_i^{(\nu + 1)} \bar{I}_i^{*(\nu + 1)}\} - P_i, \;\;\; i \in \mathcal{PQ} \cup \mathcal{PV},\]</p><p>and reactive power injection mismatch for PQ buses:</p><p class="math-container">\[  \Delta Q_i^{(\nu + 1)} = \Im\{\bar{V}_i^{(\nu + 1)} \bar{I}_i^{*(\nu + 1)}\} - Q_i, \;\;\; i \in \mathcal{PQ}.\]</p><p>The iteration loop is stopped when conditions are met:</p><p class="math-container">\[  \begin{aligned}
    |\Delta P_i^{(\nu + 1)}| &amp;&lt; \epsilon, \;\;\; i \in \mathcal{PQ} \cup \mathcal{PV} \\
    |\Delta Q_i^{(\nu + 1)}| &amp;&lt; \epsilon, \;\;\; i \in \mathcal{PQ},
  \end{aligned}\]</p><p>where <span>$\epsilon$</span> is a predetermined stopping criteria.</p><hr/></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 26 November 2022 11:20">Saturday 26 November 2022</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
