<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>In-depth Power Flow Analysis · JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Power System</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../powerSystem/model/">Power System Model</a></li><li><a class="tocitem" href="../../powerSystem/buildModel/">Build Power System Model</a></li><li><a class="tocitem" href="../../powerSystem/inDepthACDCModel/">In-depth AC and DC Model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Power Flow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../solution/">Power Flow Solution</a></li><li><a class="tocitem" href="../analysis/">Power Flow Analysis</a></li><li><a class="tocitem" href="../reactiveLimits/">Generator Reactive Power Limits</a></li><li><a class="tocitem" href="../inDepthSolution/">In-depth Power Flow Solution</a></li><li class="is-active"><a class="tocitem" href>In-depth Power Flow Analysis</a><ul class="internal"><li><a class="tocitem" href="#AC-Power-Flow-Analysis"><span>AC Power Flow Analysis</span></a></li><li><a class="tocitem" href="#DC-Power-Flow-Analysis"><span>DC Power Flow Analysis</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Power Flow</a></li><li class="is-active"><a href>In-depth Power Flow Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>In-depth Power Flow Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/powerFlow/inDepthAnalysis.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="inDepthPowerFlowAnalysis"><a class="docs-heading-anchor" href="#inDepthPowerFlowAnalysis">In-depth Power Flow Analysis</a><a id="inDepthPowerFlowAnalysis-1"></a><a class="docs-heading-anchor-permalink" href="#inDepthPowerFlowAnalysis" title="Permalink"></a></h1><p>After the bus voltages are determined, it is possible to determine other electrical quantities. JuliaGrid stores complex currents in the polar coordinate system, while complex powers are stored in the rectangle coordinate system. In the rest of this part, we define electrical quantities evaluated by JuliaGrid.</p><hr/><h2 id="AC-Power-Flow-Analysis"><a class="docs-heading-anchor" href="#AC-Power-Flow-Analysis">AC Power Flow Analysis</a><a id="AC-Power-Flow-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#AC-Power-Flow-Analysis" title="Permalink"></a></h2><p>The AC power flow analysis implies the calculation of powers and currents related to buses and branches, and powers related to generators. To perform the AC power flow analysis JuliaGrid provides the following sequence of functions:</p><pre><code class="language-julia-repl hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

result = newtonRaphson(system)
stopping = result.algorithm.iteration.stopping
for i = 1:10
    newtonRaphson!(system, result)
    if stopping.active &lt; 1e-8 &amp;&amp; stopping.reactive &lt; 1e-8
        break
    end
end

bus!(system, result)
branch!(system, result)
generator!(system, result)</code></pre><hr/><h3 id="Bus"><a class="docs-heading-anchor" href="#Bus">Bus</a><a id="Bus-1"></a><a class="docs-heading-anchor-permalink" href="#Bus" title="Permalink"></a></h3><p>The complex current injection at the bus <span>$i \in \mathcal{N}$</span> can be obtained as:</p><p class="math-container">\[    \bar{I}_{i} = \sum\limits_{j = 1}^n {Y}_{ij} \bar{V}_{j}.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.current.injection.magnitude
julia&gt; result.bus.current.injection.angle</code></pre><p>The active and reactive power injections at the bus <span>$i \in \mathcal{N}$</span> can be obtained using the expression:</p><p class="math-container">\[    {S}_{i} =\bar{V}_{i}\bar{I}_{i}^*.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.power.injection.active
julia&gt; result.bus.power.injection.reactive</code></pre><p>The active power of the generators that supply the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> is equal to the given active power of the generators in the input data, except for the slack bus, which is determined as:</p><p class="math-container">\[    P_{\text{g}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}},\]</p><p>where <span>${P}_{\text{d}i}$</span> represents the active power demanded by consumers at the slack bus.</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.power.supply.active</code></pre><p>The reactive power of the generators that supply the bus is equal to:</p><p class="math-container">\[    Q_{\text{g}i} = Q_i + Q_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{pv}} \cup \mathcal{N}_{\text{sb}},\]</p><p>where <span>${Q}_{\text{d}i}$</span> represents the reactive power demanded by consumers at the corresponding bus.</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.power.supply.reactive</code></pre><p>The active and reactive powers related to the shunt element at the bus <span>$i \in \mathcal{N}$</span> are obtained using:</p><p class="math-container">\[  {S}_{\text{sh}i} =\bar{V}_{i}\bar{I}_{\text{sh}i}^* = {y}_{\text{sh}i}^*|\bar{V}_{i}|^2.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.power.shunt.active
julia&gt; result.bus.power.shunt.reactive</code></pre><hr/><h3 id="Branch"><a class="docs-heading-anchor" href="#Branch">Branch</a><a id="Branch-1"></a><a class="docs-heading-anchor-permalink" href="#Branch" title="Permalink"></a></h3><p>The complex current flow at the bus &quot;from&quot; <span>$i \in \mathcal{N}$</span> of the the branch <span>$(i,j) \in \mathcal{E}$</span> can be obtained using the <a href="../../powerSystem/inDepthACDCModel/#ACBranchModel">unified branch model</a>:</p><p class="math-container">\[    \bar{I}_{ij} = \cfrac{1}{\tau_{ij}^2}({y}_{ij} + y_{\text{s}ij}) \bar{V}_{i} - \alpha_{ij}^*{y}_{ij} \bar{V}_{j}\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.current.from.magnitude
julia&gt; result.branch.current.from.angle</code></pre><p>Similarly, the complex current flow at the bus &quot;to&quot; <span>$j \in \mathcal{N}$</span> of the branch <span>$(i,j) \in \mathcal{E}$</span> is equal to:</p><p class="math-container">\[    \bar{I}_{ji} = -\alpha_{ij}{y}_{ij} \bar{V}_{i} + ({y}_{ij} + y_{\text{s}ij}) \bar{V}_{j}.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.current.to.magnitude
julia&gt; result.branch.current.to.angle</code></pre><p>The complex current flow through the series impedance of the branch <span>$(i,j) \in \mathcal{E}$</span> in the direction from bus <span>$i \in \mathcal{N}$</span> to bus <span>$j \in \mathcal{N}$</span> is determined as:</p><p class="math-container">\[    \bar{I}_{\text{b}ij} =  y_{ij} (\alpha_{ij}\bar{V}_{i} - \bar{V}_{j}).\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.current.impedance.magnitude
julia&gt; result.branch.current.impedance.angle</code></pre><p>The active and reactive power flows at the bus &quot;from&quot; <span>$i \in \mathcal{N}$</span> of the branch <span>$(i,j) \in \mathcal{E}$</span> are obtained as:</p><p class="math-container">\[    {S}_{ij} = \bar{V}_{i}\bar{I}_{ij}^*\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.from.active
julia&gt; result.branch.power.from.reactive</code></pre><p>The active and reactive power flows at the bus &quot;to&quot; <span>$j \in \mathcal{N}$</span> of the branch <span>$(i,j) \in \mathcal{E}$</span> are obtained as:</p><p class="math-container">\[    {S}_{ji} = \bar{V}_{j}\bar{I}_{ji}^*\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.to.active
julia&gt; result.branch.power.to.reactive</code></pre><p>Active and reactive power losses of the branch <span>$(i,j) \in \mathcal{E}$</span> arise due to the existence of the series impedance <span>$z_{ij}$</span>, and can be obtained as:</p><p class="math-container">\[    \begin{aligned}
        P_{\text{loss}ij} &amp;= r_{ij}|\bar{I}_{\text{b}ij}|^2 \\
        Q_{\text{loss}ij} &amp;= x_{ij}|\bar{I}_{\text{b}ij}|^2.
    \end{aligned}\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.loss.active
julia&gt; result.branch.power.loss.reactive</code></pre><p>Total reactive power injected by the branch <span>$(i,j) \in \mathcal{E}$</span> due to the existence of capacitive susceptances is obtained as:</p><p class="math-container">\[    Q_{\text{ch}ij} = b_{\text{s}i} (|\alpha_{ij}\bar{V}_{i}|^2 - |\bar{V}_{j}|^2).\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.shunt.reactive</code></pre><hr/><h3 id="Generator"><a class="docs-heading-anchor" href="#Generator">Generator</a><a id="Generator-1"></a><a class="docs-heading-anchor-permalink" href="#Generator" title="Permalink"></a></h3><p>The output active power of the generator at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> is equal to the given active power of the generator in the input data. Moreover, if there are several generators at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> their output active powers are still equal to the active powers given in the input data. The output active power of the generator at the slack bus is determined as:</p><p class="math-container">\[    P_{\text{g}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}}.\]</p><p>When there are several generators at the slack bus, the active power <span>$P_{\text{g}i}$</span> will be assigned to the first generator in the list of input data. After that this active power will be reduced by the output active power of the rest of the generators.</p><pre><code class="language-julia-repl hljs">julia&gt; result.generator.power.active</code></pre><p>The output reactive power of the generator at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> is equal to:</p><p class="math-container">\[    Q_{\text{g}i} = Q_i + Q_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{pq}}.\]</p><p>In case there are several generators at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> , the reactive power will be proportionally distributed between the generators based on their capabilities.</p><pre><code class="language-julia-repl hljs">julia&gt; result.generator.power.reactive</code></pre><hr/><h2 id="DC-Power-Flow-Analysis"><a class="docs-heading-anchor" href="#DC-Power-Flow-Analysis">DC Power Flow Analysis</a><a id="DC-Power-Flow-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#DC-Power-Flow-Analysis" title="Permalink"></a></h2><p>The DC power flow analysis implies the calculation of active powers related to buses, branches, and generators. To perform the DC power flow analysis JuliaGrid provides the following sequence of functions:</p><pre><code class="language-julia-repl hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

result = dcPowerFlow(system)

bus!(system, result)
branch!(system, result)
generator!(system, result)</code></pre><hr/><h3 id="Bus-2"><a class="docs-heading-anchor" href="#Bus-2">Bus</a><a class="docs-heading-anchor-permalink" href="#Bus-2" title="Permalink"></a></h3><p>The active power injection at the bus <span>$i \in \mathcal{N}$</span> can be obtained using the expression:</p><p class="math-container">\[   P_i = \sum_{j = 1}^n {B}_{ij} \theta_j + P_{\text{gs}i} + P_{\text{sh}i}.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.injection.active</code></pre><p>The active power of the generators that supply the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> is equal to the given active power of the generators in the input data, except for the slack bus, which is determined as:</p><p class="math-container">\[    P_{\text{g}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}},\]</p><p>where <span>${P}_{\text{d}i}$</span> represents the active power demanded by consumers at the slack bus.</p><pre><code class="language-julia-repl hljs">julia&gt; result.bus.power.supply.active</code></pre><hr/><h3 id="Branch-2"><a class="docs-heading-anchor" href="#Branch-2">Branch</a><a class="docs-heading-anchor-permalink" href="#Branch-2" title="Permalink"></a></h3><p>The active power flow at the bus &quot;from&quot; <span>$i \in \mathcal{N}$</span> of the branch <span>$(i,j) \in \mathcal{E}$</span> is obtained as:</p><p class="math-container">\[    P_{ij} = \cfrac{1}{\tau_{ij} x_{ij}} (\theta_{i} -\theta_{j}-\phi_{ij})\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.from.active</code></pre><p>The active power flow at the bus &quot;to&quot; <span>$j \in \mathcal{N}$</span> of the branch <span>$(i,j) \in \mathcal{E}$</span> is obtained as:</p><p class="math-container">\[    P_{ji} = - P_{ij}.\]</p><pre><code class="language-julia-repl hljs">julia&gt; result.branch.power.to.active</code></pre><hr/><h3 id="Generator-2"><a class="docs-heading-anchor" href="#Generator-2">Generator</a><a class="docs-heading-anchor-permalink" href="#Generator-2" title="Permalink"></a></h3><p>The output active power of the generator at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> is equal to the given active power of the generator in the input data. Moreover, if there are several generators at the bus <span>$i \in \mathcal{N}_{\text{pv}}$</span> their output active powers are still equal to the active powers given in the input data. The output active power of the generator at the slack bus is determined as:</p><p class="math-container">\[    P_{\text{g}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}}.\]</p><p>When there are several generators at the slack bus, the active power <span>$P_{\text{g}i}$</span> will be assigned to the first generator in the list of input data. After that this active power will be reduced by the output active power of the rest of the generators.</p><pre><code class="language-julia-repl hljs">julia&gt; result.generator.power.active</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../inDepthSolution/">« In-depth Power Flow Solution</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 1 December 2022 22:55">Thursday 1 December 2022</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
