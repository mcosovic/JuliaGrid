<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Power Flow Analysis · JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemModel/">Power System Model</a></li><li class="is-active"><a class="tocitem" href>Power Flow Analysis</a><ul class="internal"><li><a class="tocitem" href="#initializeACManual"><span>Initialize AC Power Flow</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/modelACDC/">AC and DC Model</a></li><li><a class="tocitem" href="../../tutorials/powerFlowSolution/">Power Flow Solution</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlowSolution/">Power Flow Solution</a></li><li><a class="tocitem" href="../../api/unit/">Unit System</a></li><li><a class="tocitem" href="../../api/configuration/">Configuration Setup</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Power Flow Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Power Flow Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/manual/powerFlowAnalysis.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="powerFlowAnalysisManual"><a class="docs-heading-anchor" href="#powerFlowAnalysisManual">Power Flow Analysis</a><a id="powerFlowAnalysisManual-1"></a><a class="docs-heading-anchor-permalink" href="#powerFlowAnalysisManual" title="Permalink"></a></h1><p>The calculation of bus voltages is essential to solving the power flow problem. The composite type <code>PowerSystem</code>, which includes <code>bus</code>, <code>branch</code>, and <code>generator</code> fields, is required to obtain a solution. Additionally, depending on the type of power flow used, either <code>acModel</code> or <code>dcModel</code> must be used.</p><p>After creating the composite type <code>PowerSystem</code>, the next step is to create the composite type <code>Result</code>, which has fields <code>bus</code>, <code>branch</code>, <code>generator</code>, and <code>algorithm</code>. In the DC power flow, <code>Result</code> is created when determining the bus voltage angles using the <a href="../../api/powerFlowSolution/#JuliaGrid.dcPowerFlow"><code>dcPowerFlow</code></a> function. On the other hand, the AC power flow requires the iterative method to be initialized, which is when the composite type <code>Result</code> is created using one of the following functions:</p><ul><li><a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonBX"><code>fastNewtonRaphsonBX</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonXB"><code>fastNewtonRaphsonXB</code></a></li><li><a href="../../tutorials/powerFlowSolution/#gaussSeidel"><code>gaussSeidel</code></a>.</li></ul><p>To calculate bus voltages, the appropriate function can be used depending on the type of power flow and method selected. The following functions are available:</p><ul><li><a href="../../api/powerFlowSolution/#JuliaGrid.newtonRaphson!"><code>newtonRaphson!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphson!"><code>fastNewtonRaphson!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.gaussSeidel!"><code>gaussSeidel!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.dcPowerFlow"><code>dcPowerFlow</code></a>.</li></ul><p>JuliaGrid offers a set of post-processing analysis functions for calculating powers, losses, and currents associated with buses, branches, or generators after obtaining AC or DC power flow solutions:</p><ul><li><a href="manual/@ref bus!"><code>bus!</code></a></li><li><a href="manual/@ref branch!"><code>branch!</code></a></li><li><a href="manual/@ref generator!"><code>generator!</code></a>.</li></ul><p>Finally, the package provides two additional functions. One function validates the reactive power limits of generators once the AC power flow solution has been computed. The other function adjusts the voltage angles to match the angle of an arbitrary slack bus:</p><ul><li><a href="../../api/powerFlowSolution/#JuliaGrid.reactivePowerLimit!"><code>reactivePowerLimit!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.adjustVoltageAngle!"><code>adjustVoltageAngle!</code></a>.</li></ul><hr/><h2 id="initializeACManual"><a class="docs-heading-anchor" href="#initializeACManual">Initialize AC Power Flow</a><a id="initializeACManual-1"></a><a class="docs-heading-anchor-permalink" href="#initializeACManual" title="Permalink"></a></h2><p>To begin analysing the AC power flow in JuliaGrid, we must first establish the <code>PowerSystem</code> composite type and define the AC model by calling the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> function:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.5, magnitude = 0.9, angle = -0.2)
addBus!(system; label = 2, type = 2, reactive = 0.5, magnitude = 1.1, angle = -0.1)

addBranch!(system; label = 1, from = 1, to = 2, resistance = 0.01, reactance = 0.05)

addGenerator!(system; label = 1, bus = 2, active = 3.2, magnitude = 1.2)

acModel!(system)</code></pre><p>Once the power system is set up, we can select one of the available methods for solving the AC power flow problem, such as <a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonBX"><code>fastNewtonRaphsonBX</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonXB"><code>fastNewtonRaphsonXB</code></a>, or <a href="../../tutorials/powerFlowSolution/#gaussSeidel"><code>gaussSeidel</code></a>. Let us assume we have chosen the Newton-Raphson method. To initialize the algorithm and create a <code>Result</code> composite type, we can use the following code snippet:</p><pre><code class="language-julia hljs">result = newtonRaphson(system)</code></pre><p>During this process, all necessary variables for the iterative process are initialized and evaluated based on the initial voltages. The initial voltages are set when we add buses to the power system, where we specify the magnitude and angle of the bus voltage in polar coordinates:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.9
 1.1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 -0.2
 -0.1</code></pre><p>These values are used as the starting point for the iterative process to solve the AC power flow equations:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.9
 1.1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 -0.2
 -0.1</code></pre><hr/><h5 id="Use-Initial-Custom-Voltages"><a class="docs-heading-anchor" href="#Use-Initial-Custom-Voltages">Use Initial Custom Voltages</a><a id="Use-Initial-Custom-Voltages-1"></a><a class="docs-heading-anchor-permalink" href="#Use-Initial-Custom-Voltages" title="Permalink"></a></h5><p>To modify the predefined initial values, the user can access the <code>bus.voltage.magnitude</code> and <code>bus.voltage.angle</code> variables and change their values before creating the <code>Result</code> composite type. For instance, to initiate &quot;flat start&quot;, the following code can be used:</p><pre><code class="language-julia hljs">system.bus.voltage.magnitude = fill(1.0, system.bus.number)
system.bus.voltage.angle = fill(0.0, system.bus.number)

result = newtonRaphson(system)</code></pre><p>After running the above code, the initial values of voltage magnitude and angle will be:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 1.0
 1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.0
 0.0</code></pre><hr/><h5 id="Use-Generator-Voltage-Magnitude-Setpoints"><a class="docs-heading-anchor" href="#Use-Generator-Voltage-Magnitude-Setpoints">Use Generator Voltage Magnitude Setpoints</a><a id="Use-Generator-Voltage-Magnitude-Setpoints-1"></a><a class="docs-heading-anchor-permalink" href="#Use-Generator-Voltage-Magnitude-Setpoints" title="Permalink"></a></h5><p>To initialize the AC power flow analysis, the user can utilize generator voltage magnitude setpoints. This means that the algorithm will use the voltage magnitudes defined during the construction of the generators to initialize the algorithm. This can be achieved by using the <code>generatorVoltage</code> with the <a href="../../api/configuration/#JuliaGrid.@enable"><code>@enable</code></a> macro, as shown in the example below:</p><pre><code class="language-julia hljs">@enable(generatorVoltage)

result = newtonRaphson(system)</code></pre><p>After running the above code, the initial voltage magnitudes and angles will be:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 1.0
 1.2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.0
 0.0</code></pre><p>We can observe that the initial voltage magnitude at bus 2 is updated to the magnitude setpoint defined during generator construction, deviating from its previously defined value.</p><p>Additionally, we also provide the <a href="../../api/configuration/#JuliaGrid.@disable"><code>@disable</code></a> macro to turn off the usage of voltage magnitudes of generators in the initialization process.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>It is worth noting that most open-source packages use predefined voltages in conjunction with generator voltage setpoints to define initial voltages.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../powerSystemModel/">« Power System Model</a><a class="docs-footer-nextpage" href="../../tutorials/modelACDC/">AC and DC Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Saturday 22 April 2023 19:31">Saturday 22 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
