<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Power Flow Analysis · JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemModel/">Power System Model</a></li><li class="is-active"><a class="tocitem" href>Power Flow Analysis</a><ul class="internal"><li><a class="tocitem" href="#Bus-Type-Modification"><span>Bus Type Modification</span></a></li><li><a class="tocitem" href="#AC-Power-Flow-Initialization"><span>AC Power Flow Initialization</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/modelACDC/">AC and DC Model</a></li><li><a class="tocitem" href="../../tutorials/powerFlowSolution/">Power Flow Solution</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlowSolution/">Power Flow Solution</a></li><li><a class="tocitem" href="../../api/unit/">Unit System</a></li><li><a class="tocitem" href="../../api/configuration/">Configuration Setup</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Power Flow Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Power Flow Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/manual/powerFlowAnalysis.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="powerFlowAnalysisManual"><a class="docs-heading-anchor" href="#powerFlowAnalysisManual">Power Flow Analysis</a><a id="powerFlowAnalysisManual-1"></a><a class="docs-heading-anchor-permalink" href="#powerFlowAnalysisManual" title="Permalink"></a></h1><p>The calculation of bus voltages is essential to solving the power flow problem. The composite type <code>PowerSystem</code>, which includes <code>bus</code>, <code>branch</code>, and <code>generator</code> fields, is required to obtain a solution. Additionally, depending on the type of power flow used, either <code>acModel</code> or <code>dcModel</code> must be used.</p><p>After creating the composite type <code>PowerSystem</code>, the next step is to create the composite type <code>Result</code>, which has fields <code>bus</code>, <code>branch</code>, <code>generator</code>, and <code>algorithm</code>. To initialize the iterative method for the AC power flow, the <code>Result</code> composite type must be created using any of the following functions:</p><ul><li><a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonBX"><code>fastNewtonRaphsonBX</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonXB"><code>fastNewtonRaphsonXB</code></a></li><li><a href="../../tutorials/powerFlowSolution/#gaussSeidel"><code>gaussSeidel</code></a>.</li></ul><p>To solve the AC power flow problem and obtain bus voltages, the following functions can be employed:</p><ul><li><a href="manual/@ref mismatchPowerFlow!"><code>mismatchPowerFlow!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.solvePowerFlow!"><code>solvePowerFlow!</code></a>.</li></ul><p>On the other hand, for the DC power flow, the <code>Result</code> composite type is created when determining the bus voltage angles through the use of the function:</p><ul><li><a href="../../api/powerFlowSolution/#JuliaGrid.solvePowerFlow"><code>solvePowerFlow</code></a>.</li></ul><p>JuliaGrid offers a set of post-processing analysis functions for calculating powers, losses, and currents associated with buses, branches, or generators after obtaining AC or DC power flow solutions:</p><ul><li><a href="manual/@ref bus!"><code>bus!</code></a></li><li><a href="manual/@ref branch!"><code>branch!</code></a></li><li><a href="manual/@ref generator!"><code>generator!</code></a>.</li></ul><p>Finally, the package provides two additional functions. One function validates the reactive power limits of generators once the AC power flow solution has been computed. The other function adjusts the voltage angles to match the angle of an arbitrary slack bus:</p><ul><li><a href="../../api/powerFlowSolution/#JuliaGrid.reactivePowerLimit!"><code>reactivePowerLimit!</code></a></li><li><a href="../../api/powerFlowSolution/#JuliaGrid.adjustVoltageAngle!"><code>adjustVoltageAngle!</code></a>.</li></ul><hr/><h2 id="Bus-Type-Modification"><a class="docs-heading-anchor" href="#Bus-Type-Modification">Bus Type Modification</a><a id="Bus-Type-Modification-1"></a><a class="docs-heading-anchor-permalink" href="#Bus-Type-Modification" title="Permalink"></a></h2><p>Depending on how the system is constructed, the types of buses that are initially set are checked and can be changed during the initialization process, using one of the available functions such as <a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonBX"><code>fastNewtonRaphsonBX</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonXB"><code>fastNewtonRaphsonXB</code></a>, or <a href="../../tutorials/powerFlowSolution/#gaussSeidel"><code>gaussSeidel</code></a>. Assuming the Newton-Raphson method has been chosen, to explain the details, we can observe a power system with only buses and generators. The following code snippet can be used:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3)
addBus!(system; label = 2, type = 2)
addBus!(system; label = 3, type = 2)

addGenerator!(system; label = 1, bus = 2)

acModel!(system)

result = newtonRaphson(system)</code></pre><p>Initially, the bus labelled with 1 is set as the slack bus (<code>type = 3</code>), and the buses with labels 2 and 3 are generator buses (<code>type = 2</code>). However, the bus labelled with 3 does not have a generator, and JuliaGrid considers this a mistake and changes the corresponding bus to a demand bus (<code>type = 1</code>):</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.layout.type</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Int64}:
 3
 2
 1</code></pre><p>In contrast, if a bus is initially defined as a demand bus (<code>type = 1</code>) and later a generator is added to it, the bus type will not be changed to a generator bus (<code>type = 2</code>). Instead, it will remain as a demand bus:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3)
addBus!(system; label = 2, type = 1)
addBus!(system; label = 3, type = 2)

addGenerator!(system; label = 1, bus = 2)

acModel!(system)

result = newtonRaphson(system)</code></pre><p>In this example, the bus labelled with 2 remains a demand bus (<code>type = 1</code>) even though it has a generator:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.layout.type</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Int64}:
 3
 1
 1</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Only buses that are defined as generator buses (<code>type = 2</code>) but do not have a in-service generator connected to them will have their type changed to a demand bus (<code>type = 1</code>).</p></div></div><hr/><h2 id="AC-Power-Flow-Initialization"><a class="docs-heading-anchor" href="#AC-Power-Flow-Initialization">AC Power Flow Initialization</a><a id="AC-Power-Flow-Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#AC-Power-Flow-Initialization" title="Permalink"></a></h2><p>To begin analysing the AC power flow in JuliaGrid, we must first establish the <code>PowerSystem</code> composite type and define the AC model by calling the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> function. Once the power system is set up, we can select one of the available methods for solving the AC power flow problem, such as <a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonBX"><code>fastNewtonRaphsonBX</code></a>, <a href="../../api/powerFlowSolution/#JuliaGrid.fastNewtonRaphsonXB"><code>fastNewtonRaphsonXB</code></a>, or <a href="../../tutorials/powerFlowSolution/#gaussSeidel"><code>gaussSeidel</code></a>. Assuming we have selected the Newton-Raphson method, we can use the following code snippet:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, magnitude = 1.0, angle = 0)
addBus!(system; label = 2, type = 1, magnitude = 0.9, angle = -0.1)
addBus!(system; label = 3, type = 2, magnitude = 0.8, angle = -0.2)

addGenerator!(system; label = 1, bus = 2, magnitude = 1.1)
addGenerator!(system; label = 2, bus = 3, magnitude = 1.2)

acModel!(system)

result = newtonRaphson(system)</code></pre><p>Here, in this code snippet, the function <a href="../../tutorials/powerFlowSolution/#newtonRaphson"><code>newtonRaphson</code></a> generates initial voltage vectors in polar coordinates, where the magnitudes and angles are constructed as:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 1.0
 0.9
 1.2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
  0.0
 -0.1
 -0.2</code></pre><p>The initial values for the voltage angles are defined based on the values given within the buses:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
  0.0
 -0.1
 -0.2</code></pre><p>On the other hand, the initial voltage magnitudes are determined by a combination of the values specified within the buses and the setpoints provided within the generators:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 1.0
 0.9
 0.8</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.generator.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 1.1
 1.2</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The rule governing the specification of initial voltage magnitudes is simple. If a bus has an in-service generator and is declared as a generator bus (<code>type = 2</code>), then the initial voltage magnitudes are specified using the setpoint provided within the generator. This is because the generator bus has known values of voltage magnitude that are specified within the generator, and this initial value also represents the solution for the corresponding bus.</p></div></div><p>Finally, let us add the generator at the slack bus using the following code snippet:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, magnitude = 1.0, angle = 0)
addBus!(system; label = 2, type = 1, magnitude = 0.9, angle = -0.1)
addBus!(system; label = 3, type = 2, magnitude = 0.8, angle = -0.2)

addGenerator!(system; label = 1, bus = 2, magnitude = 1.1)
addGenerator!(system; label = 2, bus = 3, magnitude = 1.2)
addGenerator!(system; label = 3, bus = 1, magnitude = 1.3)

acModel!(system)

result = newtonRaphson(system)</code></pre><p>The initial voltages are now as follows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 1.3
 0.9
 1.2</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Thus, if an in-service generator exists on the slack bus, the initial value of the voltage magnitude is specified using the setpoints provided within the generators, and this initial value represents the solution for the slack bus. This is a consequence of the fact that the slack bus has a known voltage magnitude. If a generator exists on the slack bus, its value is used, otherwise, the value is defined based on the voltage magnitude specified within the bus.</p></div></div><hr/><h5 id="Use-Initial-Custom-Voltages"><a class="docs-heading-anchor" href="#Use-Initial-Custom-Voltages">Use Initial Custom Voltages</a><a id="Use-Initial-Custom-Voltages-1"></a><a class="docs-heading-anchor-permalink" href="#Use-Initial-Custom-Voltages" title="Permalink"></a></h5><p>This method of specifying initial values has a significant advantage in that it allows the user to easily change the initial voltage magnitudes and angles, which play a crucial role in iterative methods. For instance, suppose we define our power system as follows:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, magnitude = 1.0, angle = 0)
addBus!(system; label = 2, type = 1, magnitude = 0.9, angle = -0.1)
addBus!(system; label = 3, type = 2, magnitude = 0.8, angle = -0.2)

addGenerator!(system; label = 2, bus = 3, magnitude = 1.2)

acModel!(system)</code></pre><p>Now, the user can initiate the system with a &quot;flat start&quot; without interfering with the input data. This can be easily done as follows:</p><pre><code class="language-julia hljs">system.bus.voltage.magnitude = fill(1.0, system.bus.number)
system.bus.voltage.angle = fill(0.0, system.bus.number)

result = newtonRaphson(system)</code></pre><p>The initial voltage values are:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 1.0
 1.0
 1.2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; result.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 0.0
 0.0
 0.0</code></pre><p>Thus, we start with a set of voltage magnitude values that are constant throughout iteration, and the rest of the values correspond to the &quot;flat start&quot;.</p><hr/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../powerSystemModel/">« Power System Model</a><a class="docs-footer-nextpage" href="../../tutorials/modelACDC/">AC and DC Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 24 April 2023 17:27">Monday 24 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
