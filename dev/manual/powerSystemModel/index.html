<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Power System Model · JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Power System Model</a><ul class="internal"><li><a class="tocitem" href="#buildModelManual"><span>Build Model</span></a></li><li><a class="tocitem" href="#Save-Model"><span>Save Model</span></a></li><li><a class="tocitem" href="#Add-Bus"><span>Add Bus</span></a></li><li><a class="tocitem" href="#Add-Branch"><span>Add Branch</span></a></li><li><a class="tocitem" href="#Add-Generator"><span>Add Generator</span></a></li><li><a class="tocitem" href="#AC-and-DC-Model"><span>AC and DC Model</span></a></li><li><a class="tocitem" href="#Alter-Shunt-Elements"><span>Alter Shunt Elements</span></a></li><li><a class="tocitem" href="#Change-Branch-Status"><span>Change Branch Status</span></a></li></ul></li><li><a class="tocitem" href="../powerFlowAnalysis/">Power Flow Analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/modelACDC/">AC and DC Model</a></li><li><a class="tocitem" href="../../tutorials/powerFlowSolution/">Power Flow Solution</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlowSolution/">Power Flow Solution</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Power System Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Power System Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/manual/powerSystemModel.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="powerSystemModelManual"><a class="docs-heading-anchor" href="#powerSystemModelManual">Power System Model</a><a id="powerSystemModelManual-1"></a><a class="docs-heading-anchor-permalink" href="#powerSystemModelManual" title="Permalink"></a></h1><p>The JuliaGrid supports the composite type <code>PowerSystem</code> to preserve power system data, with the following fields: <code>bus</code>, <code>branch</code>, <code>generator</code>, <code>base</code>, <code>acModel</code>, and <code>dcModel</code>. The fields <code>bus</code>, <code>branch</code>, and <code>generator</code> hold data related to buses, branches, and generators, respectively. The <code>base</code> field stores base values for power and voltages, with the default being three-phase power measured in volt-amperes (VA) for the base power and line-to-line voltages measured in volts (V) for base voltages. The macro command <a href="../../api/powerSystemModel/#JuliaGrid.@base"><code>@base</code></a> can be used to change the default unit settings for the base quantities of the composite type <code>PowerSystem</code> after it is created. </p><p>The composite type <code>PowerSystem</code> can be created using a function:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a>.</li></ul><p>JuliaGrid supports three modes for populating the <code>PowerSystem</code> type: using built-in functions, using HDF5 file format, and using <a href="https://matpower.org">Matpower</a> case files. It is recommended to use the HDF5 format for large-scale systems. To facilitate this, JuliaGrid has the function:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.savePowerSystem"><code>savePowerSystem</code></a>.</li></ul><p>This function allows to save power systems that were either loaded from Matpower case files or created using built-in functions in the HDF5 format.</p><p>Once the <code>PowerSystem</code> type is created, you can add buses, branches, and generators using the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a>.</li></ul><p>In addition, it is possible to manipulate the parameters of buses, branches, and generators using the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.shuntBus!"><code>shuntBus!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.statusBranch!"><code>statusBranch!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.parameterBranch!"><code>parameterBranch!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.statusGenerator!"><code>statusGenerator!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.outputGenerator!"><code>outputGenerator!</code></a>.</li></ul><p>Executing these functions will automatically update all fields affected by them. You can also change other parameters of the power system by accessing and modifying the values in the <code>bus</code>, <code>branch</code>, <code>generator</code>, and <code>base</code> fields of the <code>PowerSystem</code> composite type. The input electrical quantities should be entered in per-units or radians, but this default setting can be altered using the following macros <a href="../../api/powerSystemModel/#JuliaGrid.@power"><code>@power</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.@voltage"><code>@voltage</code></a>, and <a href="../../api/powerSystemModel/#JuliaGrid.@parameter"><code>@parameter</code></a>.</p><p>After adding the generator, JualiGrid provides the following functions to incorporate costs for the active and reactive power generated by the generator: </p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.addActiveCost!"><code>addActiveCost!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.addReactiveCost!"><code>addReactiveCost!</code></a>.</li></ul><p>To create vectors and matrices based on the power system topology and parameters, you can use the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a></li><li><a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a>.</li></ul><p>Note that these functions can be executed at any time once all power system buses are defined. Specifically, using the <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> function to add a new branch will automatically update the <code>acModel</code> and <code>dcModel</code> fields. However, adding a new bus using <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> requires executing the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a> functions again. In addition, executing functions related to parameter manipulation of buses and branches will also automatically update the <code>acModel</code> and <code>dcModel</code> fields.</p><hr/><h2 id="buildModelManual"><a class="docs-heading-anchor" href="#buildModelManual">Build Model</a><a id="buildModelManual-1"></a><a class="docs-heading-anchor-permalink" href="#buildModelManual" title="Permalink"></a></h2><p>The <a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a> function generates a <code>PowerSystem</code> composite type and requires a string-formatted path to either Matpower case or HDF5 files as input. Alternatively, the <code>PowerSystem</code> can be generated from scratch using the same function.</p><hr/><h5 id="Matpower-or-HDF5-File"><a class="docs-heading-anchor" href="#Matpower-or-HDF5-File">Matpower or HDF5 File</a><a id="Matpower-or-HDF5-File-1"></a><a class="docs-heading-anchor-permalink" href="#Matpower-or-HDF5-File" title="Permalink"></a></h5><p>To create a <code>PowerSystem</code> type using the Matpower case file for the IEEE 14-bus test case, which is named <code>case14</code> and located in the folder <code>C:\matpower</code>, the following Julia code can be used:</p><pre><code class="language-julia-repl hljs">system = powerSystem(&quot;C:/matpower/case14.m&quot;)</code></pre><p>You can also use the HDF5 file as input by calling the <a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a> function, assuming that the file was previously saved using the <a href="../../api/powerSystemModel/#JuliaGrid.savePowerSystem"><code>savePowerSystem</code></a> function. For example, if the HDF5 file is stored in the directory <code>C:\matpower</code>, the following Julia code can be used to construct the <code>PowerSystem</code> composite type:</p><pre><code class="language-julia-repl hljs">system = powerSystem(&quot;C:/matpower/case14.h5&quot;)</code></pre><p>To minimize loading time, it is recommended to load the power system from the HDF5 file. </p><hr/><h5 id="Model-from-Scratch"><a class="docs-heading-anchor" href="#Model-from-Scratch">Model from Scratch</a><a id="Model-from-Scratch-1"></a><a class="docs-heading-anchor-permalink" href="#Model-from-Scratch" title="Permalink"></a></h5><p>Alternativly, the model can be build from the scratch using built-in functions, for example:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)
addBus!(system; label = 3, type = 1, susceptance = 0.05, base = 138e3)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12, shiftAngle = 0.1745)
addBranch!(system; label = 2, from = 2, to = 3, resistance = 0.008, reactance = 0.05)</code></pre><hr/><h5 id="Base-Units"><a class="docs-heading-anchor" href="#Base-Units">Base Units</a><a id="Base-Units-1"></a><a class="docs-heading-anchor-permalink" href="#Base-Units" title="Permalink"></a></h5><p>The <code>system</code> stores all its electrical quantities in per-units (pu) and radians (rad), except for the base values of power and voltages. The base power value is expressed in volt-amperes (VA), while the base voltages are given in volts (V). For instance, if you run the previous example, the base power value can be obtained as follows:</p><pre><code class="language-julia hljs">system.base.power.value, system.base.power.unit</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(1.0e8, &quot;VA&quot;)</code></pre><p>Likewise, the base voltages are specified as:</p><pre><code class="language-julia hljs">system.base.voltage.value, system.base.voltage.unit</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([138000.0, 138000.0, 138000.0], &quot;V&quot;)</code></pre><hr/><h5 id="Change-Base-Units"><a class="docs-heading-anchor" href="#Change-Base-Units">Change Base Units</a><a id="Change-Base-Units-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Base-Units" title="Permalink"></a></h5><p>By using the <a href="../../api/powerSystemModel/#JuliaGrid.@base"><code>@base</code></a> macro, users can change the prefixes of the base units. For instance, if the user wishes to convert base power and base voltage values to megavolt-amperes (MVA) and kilovolts (kV) respectively, they can execute the following command:</p><pre><code class="language-julia hljs">@base(system, MVA, kV)</code></pre><p>After executing the macro, the new base power is: This macro results in the following values:</p><pre><code class="language-julia hljs">system.base.power.value, system.base.power.unit</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(100.0, &quot;MVA&quot;)</code></pre><p>Likewise, the updated base voltage values can be retrieved using the following command:</p><pre><code class="language-julia hljs">system.base.voltage.value, system.base.voltage.unit</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([138.0, 138.0, 138.0], &quot;kV&quot;)</code></pre><p>By modifying the base unit, users can convert the output data from various analyses to units other than per-units.</p><hr/><h2 id="Save-Model"><a class="docs-heading-anchor" href="#Save-Model">Save Model</a><a id="Save-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Save-Model" title="Permalink"></a></h2><p>Once the <code>system</code> variable has been created using one of the methods outlined in <a href="#buildModelManual">build model</a>, the current data can be stored in an HDF5 file by executing the following Julia code:</p><pre><code class="language-julia-repl hljs">savePowerSystem(system; path = &quot;C:/matpower/case14.h5&quot;, reference = &quot;IEEE 14-bus test case&quot;)</code></pre><p>All electrical quantities saved in the HDF5 file are in per-units (pu) and radians (rad), except for base values for power and voltage, which are given in volt-amperes (VA) and volts (V). Note that even if the user changes the base units, the units will be saved in the default settings.</p><hr/><h2 id="Add-Bus"><a class="docs-heading-anchor" href="#Add-Bus">Add Bus</a><a id="Add-Bus-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Bus" title="Permalink"></a></h2><p>We have the option to add buses to a loaded power system or create a new one from scratch. For example, let us create the empty <code>PowerSystem</code> type:</p><pre><code class="language-example hljs">system = powerSystem()</code></pre><p>We can then add buses to this power system using the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> function:</p><pre><code class="language-example hljs">addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)</code></pre><p>We recommend reading the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> function, where all the keywords used in the function are explained in detail.</p><hr/><h5 id="Change-Input-Units"><a class="docs-heading-anchor" href="#Change-Input-Units">Change Input Units</a><a id="Change-Input-Units-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Input-Units" title="Permalink"></a></h5><p>By default, all keywords related to electrical quantities must be given in per-units (pu) and radians (rad). To specify units other than the default per-units and radians, users can utilize macros such as the following:</p><pre><code class="language-example hljs">@power(MW, MVAr, MVA)
@voltage(pu, deg)</code></pre><p>We can create identical two buses as before using new system of units as follows:</p><pre><code class="language-example hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 10.0, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 5.0, angle = -2.0, base = 138e3)</code></pre><p>Note that the <code>base</code> keyword is related to base voltages, and the input unit can be changed using the <a href="../../api/powerSystemModel/#JuliaGrid.@base"><code>@base</code></a> macro. For example:</p><pre><code class="language-example hljs">@power(MW, MVAr, MVA)
@voltage(pu, deg)

system = powerSystem()
@base(system, MVA, kV)

addBus!(system; label = 1, type = 3, active = 10.0, base = 138)
addBus!(system; label = 2, type = 1, reactive = 5.0, angle = -2.0, base = 138)</code></pre><hr/><h2 id="Add-Branch"><a class="docs-heading-anchor" href="#Add-Branch">Add Branch</a><a id="Add-Branch-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Branch" title="Permalink"></a></h2><p>After adding buses with unique labels, we can define branches between them. It is important to note that the branch cannot be added unless the buses are already defined, and the <code>from</code> and <code>to</code> keywords should correspond to the already defined bus labels. Additionally, each branch should be labeled with its own unique label. For instance:</p><pre><code class="language-example hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 3, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)

addBranch!(system; label = 1, from = 1, to = 3, reactance = 0.12, shiftAngle = 0.1745)</code></pre><p>It is recommended to consult the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> function, which provides an explanation of all the keywords used in the function. Similar to buses, the input units for branches can be changed to units other than per-units (pu) and radians (rad) using different macros.</p><hr/><h2 id="Add-Generator"><a class="docs-heading-anchor" href="#Add-Generator">Add Generator</a><a id="Add-Generator-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Generator" title="Permalink"></a></h2><p>Once the buses are defined, generators can be added to the <code>system</code> variable. It is crucial to note that each generator must be assigned a unique label, and the <code>bus</code> keyword should match the unique label of the bus to which it is connected. For example:</p><pre><code class="language-example hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 3, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)

addGenerator!(system; label = 1, bus = 3, active = 0.5, reactive = 0.1)</code></pre><p>It is recommended to refer to the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> function, which explains all the keywords used in the function. Similar to buses and branches, the input units for branches can be changed to units other than per-units (pu) and radians (rad) using different macros.</p><hr/><h2 id="AC-and-DC-Model"><a class="docs-heading-anchor" href="#AC-and-DC-Model">AC and DC Model</a><a id="AC-and-DC-Model-1"></a><a class="docs-heading-anchor-permalink" href="#AC-and-DC-Model" title="Permalink"></a></h2><p>When constructing the power system, we can create an AC and/or DC model, which include vectors and matrices related to the power system&#39;s topology and parameters. The following code snippet demonstrates this:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)
addBus!(system; label = 3, type = 1, susceptance = 0.05, base = 138e3)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12, shiftAngle = 0.1745)
addBranch!(system; label = 2, from = 2, to = 3, resistance = 0.008, reactance = 0.05)

acModel!(system)
dcModel!(system)</code></pre><p>The AC model is used for AC power flow, AC optimal power flow, nonlinear state estimation or state estimation with PMUs. The DC model is essential for different DC or linear analysis. For example, the DC nodal matrix in the current example is as follows:</p><pre><code class="language-julia hljs">system.dcModel.nodalMatrix</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3×3 SparseArrays.SparseMatrixCSC{Float64, Int64} with 7 stored entries:
  8.33333   -8.33333     ⋅ 
 -8.33333   28.3333   -20.0
   ⋅       -20.0       20.0</code></pre><hr/><h5 id="New-Branch-Triggers-Model-Update"><a class="docs-heading-anchor" href="#New-Branch-Triggers-Model-Update">New Branch Triggers Model Update</a><a id="New-Branch-Triggers-Model-Update-1"></a><a class="docs-heading-anchor-permalink" href="#New-Branch-Triggers-Model-Update" title="Permalink"></a></h5><p>We can execute the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a> functions after defining the final number of buses, and each new branch added will trigger an update of the AC and DC vectors and matrices. Here&#39;s an example:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)
addBus!(system; label = 3, type = 1, susceptance = 0.05, base = 138e3)

acModel!(system)
dcModel!(system)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12, shiftAngle = 0.1745)
addBranch!(system; label = 2, from = 2, to = 3, resistance = 0.008, reactance = 0.05)</code></pre><p>The DC nodal matrix has the same values as before:</p><pre><code class="language-julia hljs">system.dcModel.nodalMatrix</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3×3 SparseArrays.SparseMatrixCSC{Float64, Int64} with 7 stored entries:
  8.33333   -8.33333     ⋅ 
 -8.33333   28.3333   -20.0
   ⋅       -20.0       20.0</code></pre><p>It is not fully recommended to create AC and DC models before adding a large number of branches if the execution time of functions is important. Instead, triggering updates to the AC and DC models using the <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> function is useful for power systems that require the addition of several branches. This update avoids the need to recreate vectors and matrices from scratch.</p><hr/><h5 id="New-Bus-Triggers-Model-Erasure"><a class="docs-heading-anchor" href="#New-Bus-Triggers-Model-Erasure">New Bus Triggers Model Erasure</a><a id="New-Bus-Triggers-Model-Erasure-1"></a><a class="docs-heading-anchor-permalink" href="#New-Bus-Triggers-Model-Erasure" title="Permalink"></a></h5><p>It is important to note that the AC and DC models must be defined when a finite number of buses are defined, otherwise, adding a new bus will delete them. For example, if we attempt to add a new bus to the <code>system</code> variable, the current DC and AC models will be completely erased.</p><pre><code class="language-julia hljs">addBus!(system; label = 4, type = 2, base = 138e3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: The current DC model has been completely erased.
[ Info: The current AC model has been completely erased.</code></pre><pre><code class="language-julia hljs">system.dcModel.nodalMatrix</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0×0 SparseArrays.SparseMatrixCSC{Float64, Int64} with 0 stored entries</code></pre><hr/><h2 id="Alter-Shunt-Elements"><a class="docs-heading-anchor" href="#Alter-Shunt-Elements">Alter Shunt Elements</a><a id="Alter-Shunt-Elements-1"></a><a class="docs-heading-anchor-permalink" href="#Alter-Shunt-Elements" title="Permalink"></a></h2><p>To modify or add new shunt element at bus in JuliaGrid, you can use the function <a href="../../api/powerSystemModel/#JuliaGrid.shuntBus!"><code>shuntBus!</code></a>. If AC and DC models have not yet been created, you can directly access the <code>bus.shunt.conductance</code> and <code>bus.shunt.susceptance</code> variables to change their values. However, if AC and DC models have been created, using the <a href="../../api/powerSystemModel/#JuliaGrid.shuntBus!"><code>shuntBus!</code></a> function will automatically update all relevant fields, including nodal matrices, in these models. This avoids the need to recreate the models from scratch. Therefore, it is recommended to use this function after executing the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a> functions. Here&#39;s an example code that demonstrates the usage of <a href="../../api/powerSystemModel/#JuliaGrid.shuntBus!"><code>shuntBus!</code></a> function:</p><pre><code class="language- hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)
addBus!(system; label = 3, type = 1, susceptance = 0.05, base = 138e3)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12, shiftAngle = 0.1745)
addBranch!(system; label = 2, from = 2, to = 3, resistance = 0.008, reactance = 0.05)

acModel!(system)
dcModel!(system)

shuntBus!(system; label = 1, conductance = 0.04)
shuntBus!(system; label = 3, susceptance = 0.02)</code></pre><p>In this example, we add the shunt element at bus 1 by setting its conductance, and change the susceptance value of the shunt element at bus 3.</p><hr/><h2 id="Change-Branch-Status"><a class="docs-heading-anchor" href="#Change-Branch-Status">Change Branch Status</a><a id="Change-Branch-Status-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Branch-Status" title="Permalink"></a></h2><p>We can use the <a href="../../api/powerSystemModel/#JuliaGrid.statusBranch!"><code>statusBranch!</code></a> function to switch the branch&#39;s status between in-service and out-of-service. If the AC and DC models are not created, the function will perform the same operation as accessing <code>branch.layout.status</code> and changing the value from 1 to 0 or vice versa. However, if the AC and DC models are created, the function will trigger updates to all affected vectors and matrices. Therefore, it&#39;s recommended to use this function after executing the <a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a> functions. The following code demonstrates the usage of the <a href="../../api/powerSystemModel/#JuliaGrid.statusBranch!"><code>statusBranch!</code></a> function:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1, base = 138e3)
addBus!(system; label = 2, type = 1, reactive = 0.05, angle = -0.03491, base = 138e3)
addBus!(system; label = 3, type = 1, susceptance = 0.05, base = 138e3)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12, shiftAngle = 0.1745)
addBranch!(system; label = 2, from = 2, to = 3, resistance = 0.008, reactance = 0.05)

acModel!(system)
dcModel!(system)

statusBranch!(system; label = 1, status = 0)</code></pre><p>This code sets the branch labeled with 1 to out-of-service. For example, the DC nodal matrix has the following form: @example statusBranch system.dcModel.nodalMatrix</p><pre><code class="nohighlight hljs">
##### Drop Zeros
After the execution of the [`statusBranch!`](@ref statusBranch!) function, the DC nodal matrix will contain zeros, as demonstrated in the code example. If needed, the user can remove these zeros by using the `dropzeros!` function, as shown below:</code></pre><p>julia-repl dropzeros!(system.dcModel.nodalMatrix) ``` It should be noted that in simulations conducted with the JuliaGrid package, the accuracy of the results will not be affected by leaving zeros.</p><hr/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../powerFlowAnalysis/">Power Flow Analysis »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 17 April 2023 13:24">Monday 17 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
