<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Power System Model · JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Power System Model</a><ul class="internal"><li><a class="tocitem" href="#BuildModelManual"><span>Build Model</span></a></li><li><a class="tocitem" href="#SaveModelManual"><span>Save Model</span></a></li><li><a class="tocitem" href="#AddBusManual"><span>Add Bus</span></a></li><li><a class="tocitem" href="#AddBranchManual"><span>Add Branch</span></a></li><li><a class="tocitem" href="#AddGeneratorManual"><span>Add Generator</span></a></li><li><a class="tocitem" href="#LabelsManual"><span>Labels</span></a></li><li><a class="tocitem" href="#AddTemplatesManual"><span>Add Templates</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlow/">Power Flow</a></li><li><a class="tocitem" href="../../api/optimalPowerFlow/">Optimal Power Flow</a></li><li><a class="tocitem" href="../../api/analysis/">Power and Current Analysis</a></li><li><a class="tocitem" href="../../api/configuration/">Configuration Setup</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Power System Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Power System Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/manual/powerSystemModel.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="PowerSystemModelManual"><a class="docs-heading-anchor" href="#PowerSystemModelManual">Power System Model</a><a id="PowerSystemModelManual-1"></a><a class="docs-heading-anchor-permalink" href="#PowerSystemModelManual" title="Permalink"></a></h1><p>The JuliaGrid supports the composite type <code>PowerSystem</code> to preserve power system data, with the following fields: <code>bus</code>, <code>branch</code>, <code>generator</code>, <code>base</code>, and <code>model</code>. The fields <code>bus</code>, <code>branch</code>, and <code>generator</code> hold data related to buses, branches, and generators, respectively. The <code>base</code> field stores base values for power and voltages, with the default being three-phase power measured in volt-amperes for the base power and line-to-line voltages measured in volts for base voltages. The <code>model</code> stores vectors and matrices that are related to the topology and parameters of the power system.</p><p>The composite type <code>PowerSystem</code> can be created using a function:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a>.</li></ul><p>JuliaGrid supports three modes for populating the <code>PowerSystem</code> type: using built-in functions, using HDF5 file format, and using <a href="https://matpower.org">Matpower</a> case files.</p><p>It is recommended to use the HDF5 format for large-scale systems. To facilitate this, JuliaGrid has the function:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.savePowerSystem"><code>savePowerSystem</code></a>.</li></ul><p>Once the <code>PowerSystem</code> type is created, you can add buses, branches, and generators using the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a>.</li></ul><p>Additionally, JuliaGrid provides macros <a href="../../api/powerSystemModel/#JuliaGrid.@bus"><code>@bus</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.@branch"><code>@branch</code></a>, and <a href="../../api/powerSystemModel/#JuliaGrid.@generator"><code>@generator</code></a> to define templates that aid in creating buses, branches, and generators. These templates help avoid entering the same parameters repeatedly.</p><p>To create vectors and matrices based on the power system topology and parameters, you can use the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.acModel!"><code>acModel!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.dcModel!"><code>dcModel!</code></a>.</li></ul><p>In addition, it is possible to manipulate the parameters of buses, branches, and generators using the following functions:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.shuntBus!"><code>shuntBus!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.statusBranch!"><code>statusBranch!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.parameterBranch!"><code>parameterBranch!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.statusGenerator!"><code>statusGenerator!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.outputGenerator!"><code>outputGenerator!</code></a>.</li></ul><p>Executing these functions will automatically update all fields affected by them within <code>PowerSystem</code> composite type. You can also change other parameters of the power system by accessing and modifying the values in the <code>bus</code>, <code>branch</code>, <code>generator</code>, and <code>base</code> fields of the <code>PowerSystem</code> type.</p><p>Finally, after adding the generator, JualiGrid provides the following functions to incorporate costs for the active and reactive power generated by the generator:</p><ul><li><a href="../../api/powerSystemModel/#JuliaGrid.addActiveCost!"><code>addActiveCost!</code></a>,</li><li><a href="../../api/powerSystemModel/#JuliaGrid.addReactiveCost!"><code>addReactiveCost!</code></a>.</li></ul><hr/><h2 id="BuildModelManual"><a class="docs-heading-anchor" href="#BuildModelManual">Build Model</a><a id="BuildModelManual-1"></a><a class="docs-heading-anchor-permalink" href="#BuildModelManual" title="Permalink"></a></h2><p>The <a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a> function generates the <code>PowerSystem</code> composite type and requires a string-formatted path to either Matpower case or HDF5 files as input. Alternatively, the <code>PowerSystem</code> can be created without any initial data by initializing it as empty, allowing the user to construct the power system from scratch.</p><hr/><h5 id="Matpower-or-HDF5-File"><a class="docs-heading-anchor" href="#Matpower-or-HDF5-File">Matpower or HDF5 File</a><a id="Matpower-or-HDF5-File-1"></a><a class="docs-heading-anchor-permalink" href="#Matpower-or-HDF5-File" title="Permalink"></a></h5><p>For example, to create the <code>PowerSystem</code> type using the Matpower case file for the IEEE 14-bus test case, which is named <code>case14.m</code> and located in the folder <code>C:\matpower</code>, the following Julia code can be used:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;C:/matpower/case14.m&quot;)</code></pre><p>In order to use the HDF5 file as input to create the <code>PowerSystem</code> object, it is necessary to have saved the data using the <a href="../../api/powerSystemModel/#JuliaGrid.savePowerSystem"><code>savePowerSystem</code></a> function beforehand. As an example, let us say we saved the power system as <code>case14.h5</code> in the directory <code>C:\hdf5</code>. In this case, the following Julia code can be used to construct the <code>PowerSystem</code> composite type:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;C:/hdf5/case14.h5&quot;)</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>It is recommended to load the power system from the HDF5 file to reduce the loading time.</p></div></div><hr/><h5 id="Model-from-Scratch"><a class="docs-heading-anchor" href="#Model-from-Scratch">Model from Scratch</a><a id="Model-from-Scratch-1"></a><a class="docs-heading-anchor-permalink" href="#Model-from-Scratch" title="Permalink"></a></h5><p>Alternatively, the model can be build from the scratch using built-in functions, for example:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, type = 3, active = 0.1, base = 345e3)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, reactive = 0.05, base = 345e3)

addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.05)</code></pre><hr/><h5 id="Internal-Unit-System"><a class="docs-heading-anchor" href="#Internal-Unit-System">Internal Unit System</a><a id="Internal-Unit-System-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-Unit-System" title="Permalink"></a></h5><p>The <code>PowerSystem</code> composite type stores all electrical quantities in per-units and radians, except for the base values of power and voltages. The base power value is expressed in volt-amperes, while the base voltages are given in volts.</p><hr/><h5 id="Change-Base-Unit-Prefixes"><a class="docs-heading-anchor" href="#Change-Base-Unit-Prefixes">Change Base Unit Prefixes</a><a id="Change-Base-Unit-Prefixes-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Base-Unit-Prefixes" title="Permalink"></a></h5><p>As an example, if you execute the previous code snippet, you can retrieve the base power and base voltage values and units as shown below:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.power.value, system.base.power.unit</code><code class="nohighlight hljs ansi" style="display:block;">(1.0e8, &quot;VA&quot;)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.voltage.value, system.base.voltage.unit</code><code class="nohighlight hljs ansi" style="display:block;">([345000.0, 345000.0], &quot;V&quot;)</code></pre><p>By using the <a href="../../api/configuration/#JuliaGrid.@base"><code>@base</code></a> macro, users can change the prefixes of the base units. For instance, if the user wishes to convert base power and base voltage values to megavolt-amperes (MVA) and kilovolts (kV) respectively, they can execute the following macro:</p><pre><code class="language-julia hljs">@base(system, MVA, kV)</code></pre><p>Upon execution of the macro, the base power and voltage values and units will be modified accordingly:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.power.value, system.base.power.unit</code><code class="nohighlight hljs ansi" style="display:block;">(100.0, &quot;MVA&quot;)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.voltage.value, system.base.voltage.unit</code><code class="nohighlight hljs ansi" style="display:block;">([345.0, 345.0], &quot;kV&quot;)</code></pre><p>Therefore, by using the <a href="../../api/configuration/#JuliaGrid.@base"><code>@base</code></a> macro to modify the prefixes of the base units, users can convert the output data from various analyses to specific units with the desired prefixes.</p><hr/><h2 id="SaveModelManual"><a class="docs-heading-anchor" href="#SaveModelManual">Save Model</a><a id="SaveModelManual-1"></a><a class="docs-heading-anchor-permalink" href="#SaveModelManual" title="Permalink"></a></h2><p>Once the <code>PowerSystem</code> type has been created using one of the methods outlined in <a href="#BuildModelManual">Build Model</a>, the current data can be stored in the HDF5 file by using  <a href="../../api/powerSystemModel/#JuliaGrid.savePowerSystem"><code>savePowerSystem</code></a> function:</p><pre><code class="language-julia hljs">savePowerSystem(system; path = &quot;C:/matpower/case14.h5&quot;, reference = &quot;IEEE 14-bus test case&quot;)</code></pre><p>All electrical quantities saved in the HDF5 file are in per-units and radians, except for base values for power and voltages, which are given in volt-amperes and volts. It is important to note that even if the user modifies the base units using the <a href="../../api/configuration/#JuliaGrid.@base"><code>@base</code></a> macro, the units will still be saved in the default settings.</p><hr/><h2 id="AddBusManual"><a class="docs-heading-anchor" href="#AddBusManual">Add Bus</a><a id="AddBusManual-1"></a><a class="docs-heading-anchor-permalink" href="#AddBusManual" title="Permalink"></a></h2><p>We have the option to add buses to a loaded power system or to one created from scratch. As an illustration, we can initiate the <code>PowerSystem</code> type and then incorporate two buses by utilizing the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> function:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, type = 3, active = 0.1, base = 345e3)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, angle = -0.034907, base = 345e3)</code></pre><p>In this case, we have created two buses where the active power demanded by the consumer at <code>Bus 1</code> is specified in per-units, which are the same units used to store electrical quantities:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.demand.active</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.1
 0.0</code></pre><p>In addition, it is worth noting that the <code>base</code> keyword is used to specify the base voltages, and its default input unit is in volts (V).</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.voltage.value, system.base.voltage.unit</code><code class="nohighlight hljs ansi" style="display:block;">([345000.0, 345000.0], &quot;V&quot;)</code></pre><p>Finally, we set the bus voltage angle in radians for the <code>Bus 2</code> to its initial value:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
  0.0
 -0.034907</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>We recommend reading the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> function, where all the keywords used in the function are explained in detail.</p></div></div><hr/><h5 id="Change-Input-Unit-System"><a class="docs-heading-anchor" href="#Change-Input-Unit-System">Change Input Unit System</a><a id="Change-Input-Unit-System-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Input-Unit-System" title="Permalink"></a></h5><p>Typically, all keywords associated with electrical quantities are expected to be provided in per-units (pu) and radians (rad) by default, with the exception of base voltages, which should be specified in volts (V). However, users can choose to use different units than the default per-units and radians or modify the prefix of the base voltage unit by using macros such as the following:</p><pre><code class="language-julia hljs">@power(MW, MVAr, MVA)
@voltage(pu, deg, kV)</code></pre><p>We can create identical two buses as before using new system of units as follows:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, type = 3, active = 10.0, base = 345.0)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, angle = -2.0, base = 345.0)</code></pre><p>As can be observed, electrical quantities will continue to be stored in per-units and radians format:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.demand.active</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.1
 0.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
  0.0
 -0.03490658503988659</code></pre><p>The base voltage values will still be stored in volts (V) since we only changed the input unit prefix, and did not modify the internal unit prefix, as shown below:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.voltage.value, system.base.voltage.unit</code><code class="nohighlight hljs ansi" style="display:block;">([345000.0, 345000.0], &quot;V&quot;)</code></pre><p>To modify the internal unit prefix, the following macro can be used:</p><pre><code class="language-julia hljs">@base(system, VA, kV)</code></pre><p>After executing this macro, the base voltage values will be stored in kilovolts (kV):</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.base.voltage.value, system.base.voltage.unit</code><code class="nohighlight hljs ansi" style="display:block;">([345.0, 345.0], &quot;kV&quot;)</code></pre><hr/><h2 id="AddBranchManual"><a class="docs-heading-anchor" href="#AddBranchManual">Add Branch</a><a id="AddBranchManual-1"></a><a class="docs-heading-anchor-permalink" href="#AddBranchManual" title="Permalink"></a></h2><p>After adding buses with unique labels, we can define branches between them. The branch cannot be added unless the buses are already defined, and the <code>from</code> and <code>to</code> keywords should correspond to the already defined bus labels. For instance:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, type = 3, active = 0.1)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, angle = -0.2)

addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.12)</code></pre><p>Here, we created branch from <code>Bus 1</code> to <code>Bus 2</code> with following parameter:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.branch.parameter.reactance</code><code class="nohighlight hljs ansi" style="display:block;">1-element Vector{Float64}:
 0.12</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>It is recommended to consult the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> function, which provides an explanation of all the keywords used in the function.</p></div></div><hr/><h5 id="Change-Input-Unit-System-2"><a class="docs-heading-anchor" href="#Change-Input-Unit-System-2">Change Input Unit System</a><a class="docs-heading-anchor-permalink" href="#Change-Input-Unit-System-2" title="Permalink"></a></h5><p>To use units other than per-units (pu) and radians (rad), macros can be employed to change the input units. For example, if the need arises to use ohms (Ω), the macros below can be employed:</p><pre><code class="language-julia hljs">@parameter(Ω, pu)

system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, type = 3, active = 0.1)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, angle = -0.2)

addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;,  reactance = 22.8528)</code></pre><p>Still, all electrical quantities are stored in per-units and radians, and the same branch as before is created, as shown in the following output:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.branch.parameter.reactance</code><code class="nohighlight hljs ansi" style="display:block;">1-element Vector{Float64}:
 0.11999999999999998</code></pre><p>It is important to note that, when working with impedance and admittance values in ohms (Ω) and siemens (S) that are related to a transformer, the assignment must be based on the primary side of the transformer.</p><hr/><h2 id="AddGeneratorManual"><a class="docs-heading-anchor" href="#AddGeneratorManual">Add Generator</a><a id="AddGeneratorManual-1"></a><a class="docs-heading-anchor-permalink" href="#AddGeneratorManual" title="Permalink"></a></h2><p>After defining the buses, generators can be added to the power system. Each generator must have a unique label, and the <code>bus</code> keyword should correspond to the unique label of the bus it is connected to. For instance:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;)

addGenerator!(system; label = &quot;Generator 1&quot;, bus = &quot;Bus 2&quot;, active = 0.5, reactive = 0.1)</code></pre><p>In the above code, we add the generator to the <code>Bus 2</code>, with active and reactive power outputs set to:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.generator.output.active</code><code class="nohighlight hljs ansi" style="display:block;">1-element Vector{Float64}:
 0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.generator.output.reactive</code><code class="nohighlight hljs ansi" style="display:block;">1-element Vector{Float64}:
 0.1</code></pre><p>Similar to buses and branches, the input units can be changed to units other than per-units using different macros.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>It is recommended to refer to the documentation for the <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> function, which explains all the keywords used in the function.</p></div></div><hr/><h2 id="LabelsManual"><a class="docs-heading-anchor" href="#LabelsManual">Labels</a><a id="LabelsManual-1"></a><a class="docs-heading-anchor-permalink" href="#LabelsManual" title="Permalink"></a></h2><p>As we shown above, JuliaGrid mandates a distinctive label for every bus, branch, or generator. These labels are stored in dictionaries, functioning as pairs of strings and integers. The string signifies the exclusive label for the specific component, whereas the integer maintains an internal numbering of buses, branches, or generators.</p><p>In contrast to the simple labeling approach, JuliaGrid offers two additional methods for labeling. The choice of method depends on the specific needs and can potentially be more straightforward.</p><hr/><h5 id="Integer-Based-Labeling"><a class="docs-heading-anchor" href="#Integer-Based-Labeling">Integer-Based Labeling</a><a id="Integer-Based-Labeling-1"></a><a class="docs-heading-anchor-permalink" href="#Integer-Based-Labeling" title="Permalink"></a></h5><p>If users prefer to utilize integers as labels in various functions, this is acceptable. However, it is important to note that despite using integers, these labels are still stored as strings. Let us take a look at the following illustration:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 1, type = 3, active = 0.1)
addBus!(system; label = 2, type = 1, angle = -0.2)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.12)

addGenerator!(system; label = 1, bus = 2, active = 0.5, reactive = 0.1)</code></pre><p>In this example, we create two buses labelled as <code>1</code> and <code>2</code>. The branch is established between these two buses with a unique branch label of <code>1</code>. Finally, the generator is connected to the bus labelled <code>2</code> and has its distinct label set to <code>1</code>.</p><hr/><h5 id="Automated-Labeling"><a class="docs-heading-anchor" href="#Automated-Labeling">Automated Labeling</a><a id="Automated-Labeling-1"></a><a class="docs-heading-anchor-permalink" href="#Automated-Labeling" title="Permalink"></a></h5><p>Users also possess the option to omit the <code>label</code> keyword, allowing JuliaGrid to independently allocate unique labels for buses, branches, or generators. In such instances, JuliaGrid employs an ordered set of incremental integers for labeling components. To illustrate, consider the subsequent example:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; type = 3, active = 0.1)
addBus!(system; type = 1, angle = -0.2)

addBranch!(system; from = 1, to = 2, reactance = 0.12)

addGenerator!(system; bus = 2, active = 0.5, reactive = 0.1)</code></pre><p>This example presents the same power system as the previous one. In the previous example, we used an ordered set of increasing integers for labels, which aligns with JuliaGrid&#39;s automatic labeling behaviour when the label keyword is omitted.</p><hr/><h5 id="Retrieving-Labels"><a class="docs-heading-anchor" href="#Retrieving-Labels">Retrieving Labels</a><a id="Retrieving-Labels-1"></a><a class="docs-heading-anchor-permalink" href="#Retrieving-Labels" title="Permalink"></a></h5><p>Finally, we will outline how users can retrieve stored labels. Let us consider the following power system creation:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = 30)
addBus!(system; label = 20)
addBus!(system; label = 40)

addBranch!(system; label = 100, from = 30, to = 20, reactance = 0.8)
addBranch!(system; label = 200, from = 20, to = 40, reactance = 0.5)

addGenerator!(system; label = 200, bus = 40)
addGenerator!(system; label = 100, bus = 30)</code></pre><p>For instance, the bus labels can be accessed using the variable:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.label</code><code class="nohighlight hljs ansi" style="display:block;">Dict{String, Int64} with 3 entries:
  &quot;40&quot; =&gt; 3
  &quot;20&quot; =&gt; 2
  &quot;30&quot; =&gt; 1</code></pre><p>JuliaGrid employs a non-ordered dictionary structure for label storage to optimize performance. If you need to retrieve labels in the order corresponding to the sequence of bus definitions, you can use the following code:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; labelBus = collect(keys(sort(system.bus.label; byvalue = true)))</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{String}:
 &quot;30&quot;
 &quot;20&quot;
 &quot;40&quot;</code></pre><p>A similar approach can be employed for branches and generators using <code>system.branch.label</code> and <code>system.generator.label</code> respectively.</p><p>Moreover, the <code>from</code> and <code>to</code> keywords are stored based on internally assigned numerical values linked to bus labels. These values are stored in the variable:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; [system.branch.layout.from system.branch.layout.to]</code><code class="nohighlight hljs ansi" style="display:block;">2×2 Matrix{Int64}:
 1  2
 2  3</code></pre><p>To recover the original <code>from</code> and <code>to</code> labels, you can utilize the following method:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; [labelBus[system.branch.layout.from] labelBus[system.branch.layout.to]]</code><code class="nohighlight hljs ansi" style="display:block;">2×2 Matrix{String}:
 &quot;30&quot;  &quot;20&quot;
 &quot;20&quot;  &quot;40&quot;</code></pre><p>Similarly, the <code>bus</code> keyword is saved based on internally assigned numerical values corresponding to bus labels and can be accessed using:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.generator.layout.bus</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Int64}:
 3
 1</code></pre><p>To obtain the original labels of the <code>bus</code> keyword, you can use the following code:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; labelBus[system.generator.layout.bus]</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{String}:
 &quot;40&quot;
 &quot;30&quot;</code></pre><hr/><h2 id="AddTemplatesManual"><a class="docs-heading-anchor" href="#AddTemplatesManual">Add Templates</a><a id="AddTemplatesManual-1"></a><a class="docs-heading-anchor-permalink" href="#AddTemplatesManual" title="Permalink"></a></h2><p>The functions <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a>, and <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> are used to add bus, branch, and generator to the power system, respectively. If certain keywords are not specified, default values are assigned to some parameters.</p><hr/><h5 id="Default-Keyword-Values"><a class="docs-heading-anchor" href="#Default-Keyword-Values">Default Keyword Values</a><a id="Default-Keyword-Values-1"></a><a class="docs-heading-anchor-permalink" href="#Default-Keyword-Values" title="Permalink"></a></h5><p>Concerning the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> function, in case the <code>type</code> keyword is not supplied, the bus type is automatically configured as a demand bus, with <code>type = 1</code> as its value. The initial bus voltage is standardized to <code>magnitude = 1</code> per unit, while the base voltage is set to <code>base = 138e3</code> volts. These predefined values hold significant importance to avert potential issues during algorithm execution, such as encountering a singular Jacobian when <code>magnitude = 0.0</code>.</p><p>Transitioning to the <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> function, the default status is set to <code>status = 1</code>, indicating the branch&#39;s operational status as in-service. Moreover, the transformer&#39;s off-nominal turns ratio assumes a value of <code>turnsRatio = 1.0</code>, accompanied by a <code>shiftAngle = 0.0</code>, which collectively establish the line configuration using these standard settings. Additionally, the type keyword defaults to <code>type = 1</code>, aligning with a specific rating category.</p><p>Similarly, the <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> function designates an operational generator by employing <code>status = 1</code>, and it sets<code>magnitude = 1.0</code> per unit, denoting the desired voltage magnitude setpoint.</p><p>The remaining parameters are initialized with default values of zero.</p><hr/><h5 id="Change-Default-Keyword-Values"><a class="docs-heading-anchor" href="#Change-Default-Keyword-Values">Change Default Keyword Values</a><a id="Change-Default-Keyword-Values-1"></a><a class="docs-heading-anchor-permalink" href="#Change-Default-Keyword-Values" title="Permalink"></a></h5><p>In JuliaGrid, users are allowed to modify default values and assign non-zero values to other keywords using the <a href="../../api/powerSystemModel/#JuliaGrid.@bus"><code>@bus</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.@branch"><code>@branch</code></a>, and <a href="../../api/powerSystemModel/#JuliaGrid.@generator"><code>@generator</code></a> macros. These macros create bus, branch, and generator templates that are used every time the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a>, and <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> functions are called. For instance, the code block shows an example of creating bus, branch, and generator templates with customized default values:</p><pre><code class="language-julia hljs">system = powerSystem()

@bus(type = 2, active = 0.1)
addBus!(system; label = &quot;Bus 1&quot;)
addBus!(system; label = &quot;Bus 2&quot;, type = 1, active = 0.5)

@branch(reactance = 0.12)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;)
addBranch!(system; label = &quot;Branch 2&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, reactance = 0.06)

@generator(magnitude = 1.1)
addGenerator!(system; label = &quot;Generator 1&quot;, bus = &quot;Bus 1&quot;, active = 50)
addGenerator!(system; label = &quot;Generator 2&quot;, bus = &quot;Bus 1&quot;, active = 20)</code></pre><p>This code example involves two uses of the <a href="../../api/powerSystemModel/#JuliaGrid.addBus!"><code>addBus!</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.addBranch!"><code>addBranch!</code></a> functions. In the first use, the functions rely on the default values set by the templates created with the <a href="../../api/powerSystemModel/#JuliaGrid.@bus"><code>@bus</code></a> and <a href="../../api/powerSystemModel/#JuliaGrid.@branch"><code>@branch</code></a> macros. In contrast, the second use passes specific values that match the keywords used in the templates. As a result, the templates are overridden:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.layout.type</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Int8}:
 2
 1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.demand.active</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.1
 0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.branch.parameter.reactance</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 0.12
 0.06</code></pre><p>In the given example, the <a href="../../api/powerSystemModel/#JuliaGrid.@generator"><code>@generator</code></a> macro is utilized instead of repeatedly specifying the <code>magnitude</code> keyword in the <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> function. This macro creates a generator template with a default value for <code>magnitude</code>, which is automatically applied every time the <a href="../../api/powerSystemModel/#JuliaGrid.addGenerator!"><code>addGenerator!</code></a> function is called. Therefore, it eliminates the requirement to set the magnitude value for each individual generator:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.generator.voltage.magnitude</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 1.1
 1.1</code></pre><hr/><h5 id="Change-Input-Unit-System-3"><a class="docs-heading-anchor" href="#Change-Input-Unit-System-3">Change Input Unit System</a><a class="docs-heading-anchor-permalink" href="#Change-Input-Unit-System-3" title="Permalink"></a></h5><p>The JuliaGrid requires users to specify electrical quantity-related keywords in per-units (pu) and radians (rad) by default. However, it provides macros, such as <a href="../../api/configuration/#JuliaGrid.@power"><code>@power</code></a>, that allow users to specify other units:</p><pre><code class="language-julia hljs">system = powerSystem()

@power(MW, MVAr, MVA)

@bus(active = 100, reactive = 200)
addBus!(system; label = &quot;Bus 1&quot;)

@power(pu, pu, pu)

addBus!(system; label = &quot;Bus 2&quot;, active = 0.5)</code></pre><p>In this example, we create the bus template and one bus using SI power units, and then we switch to per-units and add the second bus. It is important to note that once the template is defined in any unit system, it remains valid regardless of subsequent unit system changes. The resulting power values are:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.demand.active</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 1.0
 0.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; system.bus.demand.reactive</code><code class="nohighlight hljs ansi" style="display:block;">2-element Vector{Float64}:
 2.0
 2.0</code></pre><p>Thus, JuliaGrid automatically tracks the unit system used to create templates and provides the appropriate conversion to per-units and radians. Even if the user switches to a different unit system later on, the previously defined template will still be valid.</p><hr/><h5 id="Multiple-Templates"><a class="docs-heading-anchor" href="#Multiple-Templates">Multiple Templates</a><a id="Multiple-Templates-1"></a><a class="docs-heading-anchor-permalink" href="#Multiple-Templates" title="Permalink"></a></h5><p>In the case of calling the <a href="../../api/powerSystemModel/#JuliaGrid.@bus"><code>@bus</code></a>, <a href="../../api/powerSystemModel/#JuliaGrid.@branch"><code>@branch</code></a>, or <a href="../../api/powerSystemModel/#JuliaGrid.@generator"><code>@generator</code></a> macros multiple times, the provided keywords and values will be combined into a single template for the corresponding component (bus, branch, or generator), which will be used for generating the component.</p><hr/><h5 id="Reset-Templates"><a class="docs-heading-anchor" href="#Reset-Templates">Reset Templates</a><a id="Reset-Templates-1"></a><a class="docs-heading-anchor-permalink" href="#Reset-Templates" title="Permalink"></a></h5><p>To reset the bus, branch, and generator templates to their default settings, users can utilize the following macros:</p><pre><code class="language-julia hljs">@default(bus)
@default(branch)
@default(generator)</code></pre><p>Additionally, users can reset all templates for the bus, branch, and generator components using the macro:</p><pre><code class="language-julia hljs">@default(template)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../../api/powerSystemModel/">Power System Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 29 August 2023 20:17">Tuesday 29 August 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
