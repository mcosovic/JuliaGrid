<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DC Power Flow ¬∑ JuliaGrid</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../manual/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../manual/dcPowerFlow/">DC Power Flow</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../acdcModel/">AC and DC Model</a></li><li><a class="tocitem" href="../acPowerFlow/">AC Power Flow</a></li><li class="is-active"><a class="tocitem" href>DC Power Flow</a><ul class="internal"><li><a class="tocitem" href="#DCPowerFlowSolutionTutorials"><span>DC Power Flow Solution</span></a></li><li><a class="tocitem" href="#DCBusPowersTutorials"><span>Bus Powers</span></a></li><li><a class="tocitem" href="#DCBranchPowersTutorials"><span>Branch Powers</span></a></li><li><a class="tocitem" href="#DCGeneratorPowersTutorials"><span>Generator Powers</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../api/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../api/optimaPowerFlow/">Optimal Power Flow</a></li><li><a class="tocitem" href="../../api/configuration/">Configuration Setup</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>DC Power Flow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DC Power Flow</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/tutorials/dcPowerFlow.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="DCPowerFlowTutorials"><a class="docs-heading-anchor" href="#DCPowerFlowTutorials">DC Power Flow</a><a id="DCPowerFlowTutorials-1"></a><a class="docs-heading-anchor-permalink" href="#DCPowerFlowTutorials" title="Permalink"></a></h1><p>JuliaGrid employs standard network components and the <a href="../acdcModel/#DCUnifiedBranchModelTutorials">unified branch model</a> to obtain the DC power flow solution. To begin, the <code>PowerSystem</code> composite type must be provided to JuliaGrid through the use of the <a href="../../api/powerSystemModel/#JuliaGrid.powerSystem"><code>powerSystem</code></a> function, as illustrated by the following example:</p><pre><code class="language-julia hljs">@power(MW, MVAr, MVA)
@voltage(pu, deg, V)

system = powerSystem()

addBus!(system; label = 1, type = 3)
addBus!(system; label = 2, type = 1, active = 21.7)
addBus!(system; label = 3, type = 2, conductance = 0.07)

addBranch!(system; label = 1, from = 1, to = 2, reactance = 0.26)
addBranch!(system; label = 2, from = 1, to = 3, reactance = 0.38)
addBranch!(system; label = 3, from = 2, to = 3, reactance = 0.17, turnsRatio = 0.97)

addGenerator!(system; label = 1, bus = 1, active = 2.0)
addGenerator!(system; label = 2, bus = 1, active = 4.0)
addGenerator!(system; label = 3, bus = 3, active = 5.0)</code></pre><p>To review, we can conceptualize the bus/branch model as the graph denoted by <span>$\mathcal{G} = (\mathcal{N}, \mathcal{E})$</span>, where we have the set of buses <span>$\mathcal{N} = \{1, \dots, n\}$</span>, and the set of branches <span>$\mathcal{E} \subseteq \mathcal{N} \times \mathcal{N}$</span> within the power system:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùí© = collect(keys(sort(system.bus.label)))</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Int64}:
 1
 2
 3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ‚Ñ∞ = [system.branch.layout.from system.branch.layout.to]</code><code class="nohighlight hljs ansi" style="display:block;">3√ó2 Matrix{Int64}:
 1  2
 1  3
 2  3</code></pre><div class="admonition is-category-ukw"><header class="admonition-header">Notation</header><div class="admonition-body"><p>In this section, when referring to a vector <span>$\mathbf{a}$</span>, we use the notation <span>$\mathbf{a} = [a_{i}]$</span> or <span>$\mathbf{a} = [a_{ij}]$</span>, where <span>$a_i$</span> denotes the generic element associated with bus <span>$i \in \mathcal{N}$</span>, and <span>$a_{ij}$</span> denotes the generic element associated with branch <span>$(i,j) \in \mathcal{E}$</span>.</p></div></div><hr/><h2 id="DCPowerFlowSolutionTutorials"><a class="docs-heading-anchor" href="#DCPowerFlowSolutionTutorials">DC Power Flow Solution</a><a id="DCPowerFlowSolutionTutorials-1"></a><a class="docs-heading-anchor-permalink" href="#DCPowerFlowSolutionTutorials" title="Permalink"></a></h2><p>As discussed in section <a href="../acdcModel/#DCModelTutorials">DC Model</a>, the DC power flow problem can be represented by a set of linear equations given by:</p><p class="math-container">\[  \mathbf {P} = \mathbf{B} \bm {\theta} + \mathbf{P_\text{tr}} + \mathbf{P}_\text{sh}.\]</p><hr/><h5 id="Implementation"><a class="docs-heading-anchor" href="#Implementation">Implementation</a><a id="Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation" title="Permalink"></a></h5><p>JuliaGrid offers a set of functions to solve the DC power flow problem and obtain the bus voltage angles. Firstly, the power system is loaded and the DC model is built using the following code sequence:</p><pre><code class="language-julia hljs">dcModel!(system)</code></pre><p>The DC power flow solution is obtained through a non-iterative approach by solving the system of linear equations:</p><p class="math-container">\[    \bm {\theta} = \mathbf{B}^{-1}(\mathbf {P} - \mathbf{P_\text{tr}} - \mathbf{P}_\text{sh}).\]</p><p>The initial step taken by JuliaGrid is to factorize the nodal matrix <span>$\mathbf{B}$</span> using the function:</p><pre><code class="language-julia hljs">model = dcPowerFlow(system)</code></pre><p>The factorization of the nodal matrix can be accessed using:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; model.factorization</code><code class="nohighlight hljs ansi" style="display:block;">SuiteSparse.CHOLMOD.Factor{Float64}
type:    LLt
method:  simplicial
maxnnz:  6
nnz:     6
success: true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using SparseArrays</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sparse(model.factorization.L)</code><code class="nohighlight hljs ansi" style="display:block;">3√ó3 SparseArrays.SparseMatrixCSC{Float64, Int64} with 6 stored entries:
 1.0    ‚ãÖ        ‚ãÖ
 0.0   3.14808   ‚ãÖ
 0.0  -1.92634  2.23273</code></pre><p>This enables the user to modify any of the vectors <span>$\mathbf {P}$</span>, <span>$\mathbf{P_\text{tr}}$</span>, and <span>$\mathbf{P}_\text{sh}$</span> and reuse the factorization. This approach is more efficient compared to solving the system of equations from the beginning, as it saves computation time.</p><p>To acquire the bus voltage angles, the user must invoke the function:</p><pre><code class="language-julia hljs">solve!(system, model)</code></pre><p>It is important to note that the slack bus voltage angle is excluded from the vector <span>$\bm{\theta}$</span> only during the computation step. As a analysis, the corresponding elements in the vectors <span>$\mathbf {P}$</span>, <span>$\mathbf{P_\text{tr}}$</span>, <span>$\mathbf{P}_\text{sh}$</span>, and the corresponding row and column of the matrix <span>$\mathbf{B}$</span> are removed. It is worth mentioning that this process is handled internally, and the stored elements remain unchanged.</p><p>Finally, the resulting bus voltage angles are saved in the vector as follows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùõâ = model.voltage.angle</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
  0.0
 -0.032143642688532745
 -0.016746829916759846</code></pre><hr/><h2 id="DCBusPowersTutorials"><a class="docs-heading-anchor" href="#DCBusPowersTutorials">Bus Powers</a><a id="DCBusPowersTutorials-1"></a><a class="docs-heading-anchor-permalink" href="#DCBusPowersTutorials" title="Permalink"></a></h2><p>JuliaGrid&#39;s <a href="tutorials/@ref analysisBus(::PowerSystem, ::DCPowerFlow)"><code>analysisBus</code></a> function can be used to compute powers associated with buses. Here is an example code snippet:</p><pre><code class="language- hljs">power = analysisBus(system, model)
nothing # hide</code></pre><p>To obtain the active power injection at bus <span>$i \in \mathcal{N}$</span>, we can refer to section <a href="../acdcModel/#DCModelTutorials">DC Model</a>, which provides the following expression:</p><p class="math-container">\[   P_i = \sum_{j = 1}^n {B}_{ij} \theta_j + P_{\text{tr}i} + P_{\text{sh}i},\;\;\; i \in \mathcal{N}.\]</p><p>Active power injections are stored as the vector <span>$\mathbf{P} = [P_i]$</span>, and can be retrieved using the following commands:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùêè = power.injection.active</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: type #power has no field injection</code></pre><p>The active power supplied by generators to the buses can be calculated by summing the given generator active powers in the input data, except for the slack bus, which can be determined as:</p><p class="math-container">\[    P_{\text{s}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}},\]</p><p>where <span>$P_{\text{d}i}$</span> represents the active power demanded by consumers at the slack bus. The vector of active power injected by generators to the buses, denoted by <span>$\mathbf{P}_{\text{s}} = [P_{\text{s}i}]$</span>, can be obtained using the following command:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùêè‚Çõ = power.supply.active</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: type #power has no field supply</code></pre><hr/><h2 id="DCBranchPowersTutorials"><a class="docs-heading-anchor" href="#DCBranchPowersTutorials">Branch Powers</a><a id="DCBranchPowersTutorials-1"></a><a class="docs-heading-anchor-permalink" href="#DCBranchPowersTutorials" title="Permalink"></a></h2><p>To compute powers associated with branches, JuliaGrid provides the <a href="tutorials/@ref analysisBranch(::PowerSystem, ::DCPowerFlow)"><code>analysisBranch</code></a> function. Here is an example code snippet:</p><pre><code class="language- hljs">power = analysisBranch(system, model)
nothing # hide</code></pre><p>The active power flows at from bus end <span>$i \in \mathcal{N}$</span> can be obtained using the following equations:</p><p class="math-container">\[    P_{ij} = \cfrac{1}{\tau_{ij} x_{ij}} (\theta_{i} -\theta_{j}-\phi_{ij}),\;\;\; (i,j) \in \mathcal{E}.\]</p><p>The resulting active power flows at from bus end are stored as the vector <span>$\mathbf{P}_{\text{i}} = [P_{ij}]$</span>, which can be retrieved using the following command:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùêè·µ¢ = power.from.active</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: type #power has no field from</code></pre><p>Similarly, the active power flows at to bus end <span>$j \in \mathcal{N}$</span> can be obtained as:</p><p class="math-container">\[    P_{ji} = - P_{ij},\;\;\; (i,j) \in \mathcal{E}.\]</p><p>The resulting active power flows at to bus end are stored as the vector <span>$\mathbf{P}_{\text{j}} = [P_{ji}]$</span>, which can be retrieved using the following command:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùêè‚±º = power.to.active</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: type #power has no field to</code></pre><hr/><h2 id="DCGeneratorPowersTutorials"><a class="docs-heading-anchor" href="#DCGeneratorPowersTutorials">Generator Powers</a><a id="DCGeneratorPowersTutorials-1"></a><a class="docs-heading-anchor-permalink" href="#DCGeneratorPowersTutorials" title="Permalink"></a></h2><p>To compute powers associated with generators, JuliaGrid provides the <a href="tutorials/@ref analysisGenerator(::PowerSystem, ::DCPowerFlow)"><code>analysisGenerator</code></a> function. Here is an example code snippet:</p><pre><code class="language- hljs">power = analysisGenerator(system, model)
nothing # hide</code></pre><p>The active power output of a generator located at bus <span>$i \in \mathcal{N}_{\text{pv}} \cup \mathcal{N}_{\text{pq}}$</span> is equal to the active power specified in the input data. If there are multiple generators, their active power outputs are also equal to the active power specified in the input data. However, the active power output of a generator located at the slack bus is determined as:</p><p class="math-container">\[    P_{\text{g}i} = P_i + P_{\text{d}i},\;\;\; i \in \mathcal{N}_{\text{sb}}.\]</p><p>In the case of multiple generators connected to the slack bus, the first generator in the input data is assigned the obtained value of <span>$P_{\text{g}i}$</span>. Then, this amount of power is reduced by the output active power of the other generators. Therefore, to get the vector of output active power of generators, i.e., <span>$\mathbf{P}_{\text{g}} = [P_{\text{g}i}]$</span>, you can use the following command:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ùêè‚Çí = power.active</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: type #power has no field active</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../acPowerFlow/">¬´ AC Power Flow</a><a class="docs-footer-nextpage" href="../../api/powerSystemModel/">Power System Model ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 22 May 2023 10:41">Monday 22 May 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
